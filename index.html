<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星际导航 | 探索网络宇宙</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%231a202c'/%3E%3Ccircle cx='50' cy='50' r='35' fill='%232d3748'/%3E%3Ccircle cx='50' cy='50' r='25' fill='%234a5568'/%3E%3Ccircle cx='50' cy='50' r='15' fill='%23805ad5'/%3E%3C/svg%3E" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // Tailwind 配置
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        space: {
                            black: '#0a0e17',
                            dark: '#12192c',
                            blue: '#1e3a8a',
                            purple: '#4c1d95',
                            pink: '#ec4899',
                            glow: '#8b5cf6'
                        }
                    },
                    fontFamily: {
                        space: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'twinkle': 'twinkle 3s ease-in-out infinite',
                        'spin-slow': 'spin 15s linear infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        twinkle: {
                            '0%, 100%': { opacity: 0.6 },
                            '50%': { opacity: 1 }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 0 10px rgba(139, 92, 246, 0.7);
            }
            .glow {
                box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
            }
            .glow-hover:hover {
                box-shadow: 0 0 20px rgba(139, 92, 246, 0.8);
                transform: translateY(-2px);
                transition: all 0.3s ease;
            }
            .star {
                position: absolute;
                background-color: white;
                border-radius: 50%;
                animation: twinkle 3s infinite;
            }
            .folder-expanded .folder-content {
                display: block;
            }
            .folder-collapsed .folder-content {
                display: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .meteor {
                position: absolute;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8));
                transform-origin: top right;
                border-radius: 50%;
                z-index: 0;
            }
        }
    </style>
</head>
<body class="bg-space-black text-gray-100 font-space min-h-screen overflow-x-hidden relative">
    <!-- 星空背景 -->
    <div id="stars" class="fixed inset-0 z-0"></div>
    
    <!-- 流星效果容器 -->
    <div id="meteors" class="fixed inset-0 z-0 pointer-events-none"></div>

    <!-- 顶部控制栏 -->
    <header id="controls" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-space-dark/80 backdrop-blur-md p-3">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-space-blue/50 transition-colors">
                    <i class="fa fa-moon-o text-space-glow"></i>
                </button>
                <button id="settings-btn" class="p-2 rounded-full hover:bg-space-blue/50 transition-colors">
                    <i class="fa fa-cog text-space-glow"></i>
                </button>
            </div>
            <div class="hidden md:flex items-center space-x-2">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="搜索书签..." 
                        class="bg-space-dark/70 border border-space-purple/50 rounded-full py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-space-glow w-64 text-sm">
                    <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                <!-- 已移除：编辑中心按钮 -->
            </div>
            <button id="mobile-menu-btn" class="md:hidden p-2 rounded-full hover:bg-space-blue/50 transition-colors">
                <i class="fa fa-bars text-space-glow"></i>
            </button>
        </div>
        
        <!-- 移动端菜单 -->
        <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 right-0 bg-space-dark/95 backdrop-blur-md p-4 border-t border-space-purple/30">
            <div class="relative mb-3">
                <input type="text" id="mobile-search-input" placeholder="搜索书签..." 
                    class="bg-space-dark/70 border border-space-purple/50 rounded-full py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-space-glow w-full text-sm">
                <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            </div>
            <!-- 已移除：移动端编辑中心按钮 -->
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto pt-24 pb-16 px-4 relative z-10">
        <!-- 顶部组件 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <!-- 在线时长统计 -->
            <div class="bg-space-dark/60 backdrop-blur-sm rounded-xl p-4 border border-space-purple/30 hover:border-space-glow/50 transition-all glow-hover">
                <div class="flex justify-between items-start mb-3">
                    <h3 class="text-space-glow font-semibold flex items-center">
                        <i class="fa fa-clock-o mr-2"></i> 在线时长
                    </h3>
                    <span class="bg-space-blue/30 text-xs px-2 py-1 rounded-full">今日</span>
                </div>
                <div class="text-3xl font-bold text-white" id="online-duration">00:00:00</div>
                <div class="text-xs text-gray-400 mt-2">
                    自 <span id="start-time">首次访问</span> 开始
                </div>
            </div>

            <!-- 健康提醒 -->
            <div class="bg-space-dark/60 backdrop-blur-sm rounded-xl p-4 border border-space-purple/30 hover:border-space-glow/50 transition-all glow-hover">
                <div class="flex justify-between items-start mb-3">
                    <h3 class="text-space-glow font-semibold flex items-center">
                        <i class="fa fa-heartbeat mr-2"></i> 健康提醒
                    </h3>
                    <span class="bg-space-pink/30 text-xs px-2 py-1 rounded-full" id="reminder-status">正常</span>
                </div>
                <div class="text-lg font-medium text-white" id="health-reminder">距离下次休息还有 25 分钟</div>
                <div class="mt-3 flex justify-end">
                    <button id="snooze-reminder" class="text-xs bg-space-blue/20 hover:bg-space-blue/40 px-3 py-1 rounded-full transition-colors">
                        稍后提醒
                    </button>
                </div>
            </div>

            <!-- 世界时钟 -->
            <div class="bg-space-dark/60 backdrop-blur-sm rounded-xl p-4 border border-space-purple/30 hover:border-space-glow/50 transition-all glow-hover">
                <div class="flex justify-between items-start mb-3">
                    <h3 class="text-space-glow font-semibold flex items-center">
                        <i class="fa fa-globe mr-2"></i> 世界时钟
                    </h3>
                    <button id="add-city-btn" class="text-xs text-space-glow disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <i class="fa fa-plus"></i>
                    </button>
                </div>
                <div id="cities-container" class="space-y-2">
                    <!-- 城市时钟将在这里动态生成 -->
                </div>
            </div>
        </div>

        <!-- 广告位 1 -->
        <div class="mb-8 rounded-xl overflow-hidden border border-space-purple/30 relative group hover:border-space-glow/50 transition-all h-40 md:h-52 bg-space-dark/30">
            <div id="ad-1" class="w-full h-full flex items-center justify-center">
                <div class="text-center p-4">
                    <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                    <p class="text-gray-400 text-sm">广告位 1 - 可在编辑中心配置</p>
                </div>
            </div>
            <div class="absolute inset-0 bg-gradient-to-tr from-transparent to-space-glow/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
        </div>

        <!-- 书签区域 -->
        <div class="mb-8">
            <h2 class="text-xl font-bold mb-6 text-white flex items-center">
                <i class="fa fa-bookmark text-space-glow mr-2"></i> 书签导航
                <span class="ml-2 text-sm font-normal text-gray-400" id="bookmark-count">(0 个网站)</span>
            </h2>
            
            <div id="bookmarks-container" class="space-y-6">
                <!-- 书签将在这里按文件夹结构动态生成 -->
                <div class="text-center py-10 text-gray-500">
                    <i class="fa fa-folder-open-o text-4xl mb-3 opacity-50"></i>
                    <p>暂无书签数据</p>
                    <p class="text-sm mt-1">请在编辑中心导入书签</p>
                </div>
            </div>
        </div>

        <!-- 广告位 2 -->
        <div class="mb-8 rounded-xl overflow-hidden border border-space-purple/30 relative group hover:border-space-glow/50 transition-all h-40 md:h-52 bg-space-dark/30">
            <div id="ad-2" class="w-full h-full flex items-center justify-center">
                <div class="text-center p-4">
                    <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                    <p class="text-gray-400 text-sm">广告位 2 - 可在编辑中心配置</p>
                </div>
            </div>
            <div class="absolute inset-0 bg-gradient-to-tr from-transparent to-space-glow/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
        </div>

        <!-- 广告位 3 -->
        <div class="mb-8 rounded-xl overflow-hidden border border-space-purple/30 relative group hover:border-space-glow/50 transition-all h-40 md:h-52 bg-space-dark/30">
            <div id="ad-3" class="w-full h-full flex items-center justify-center">
                <div class="text-center p-4">
                    <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                    <p class="text-gray-400 text-sm">广告位 3 - 可在编辑中心配置</p>
                </div>
            </div>
            <div class="absolute inset-0 bg-gradient-to-tr from-transparent to-space-glow/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
        </div>
    </main>

    <!-- 底部信息 -->
    <footer class="bg-space-dark/80 backdrop-blur-md py-6 border-t border-space-purple/30 relative z-10">
        <div class="container mx-auto px-4">
            <div class="dark-white flex flex-col md:flex-row justify-between items-center">
                <div class="mb-3 md:mb-0">共收录 <span id="total-bookmarks">0</span> 个网站</div>
                <div>Copyright © 2018-<span id="current-year">2023</span> <span id="site-hostname">星际导航</span>, All Rights Reserved</div>
            </div>
        </div>
    </footer>

    <!-- 设置模态框 -->
    <div id="settings-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-space-dark border border-space-purple/50 rounded-xl w-full max-w-md p-6 transform transition-all scale-95 opacity-0" id="settings-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">设置</h3>
                <button id="close-settings" class="text-gray-400 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-5">
                <div>
                    <h4 class="text-space-glow font-medium mb-2">GitHub 配置</h4>
                    <p class="text-xs text-gray-400 mb-3">配置后可同步书签数据到GitHub仓库</p>
                    
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm text-gray-300 mb-1">用户名</label>
                            <input type="text" id="github-username" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="GitHub 用户名">
                        </div>
                        
                        <div>
                            <label class="block text-sm text-gray-300 mb-1">仓库名</label>
                            <input type="text" id="github-repo" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="仓库名称">
                        </div>
                        
                        <div>
                            <label class="block text-sm text-gray-300 mb-1">访问令牌 (Token)</label>
                            <input type="password" id="github-token" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="需要 repo 权限的 Personal Access Token">
                            <p class="text-xs text-gray-500 mt-1">仅用于私有仓库访问和数据修改</p>
                        </div>
                        
                        <div class="flex space-x-2">
                            <button id="validate-github" class="flex-1 bg-space-blue hover:bg-space-blue/80 text-white py-2 px-4 rounded-lg transition-colors text-sm">
                                验证配置
                            </button>
                            <button id="save-github" class="flex-1 bg-space-purple hover:bg-space-purple/80 text-white py-2 px-4 rounded-lg transition-colors text-sm">
                                保存配置
                            </button>
                        </div>
                        
                        <div id="github-status" class="text-xs py-1 px-2 rounded hidden"></div>
                    </div>
                </div>
                
                <div class="pt-2 border-t border-gray-800">
                    <button id="open-edit-center" class="w-full bg-space-purple hover:bg-space-purple/80 text-white py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        进入编辑中心
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑中心模态框 -->
    <div id="edit-center-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-space-dark border border-space-purple/50 rounded-xl w-full max-w-5xl max-h-[90vh] flex flex-col transform transition-all scale-95 opacity-0" id="edit-center-content">
            <div class="flex justify-between items-center p-6 border-b border-gray-800">
                <h3 class="text-xl font-bold text-white">编辑中心</h3>
                <button id="close-edit-center" class="text-gray-400 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="flex overflow-hidden h-full">
                <!-- 编辑中心侧边栏 -->
                <div class="w-48 border-r border-gray-800 p-4 overflow-y-auto scrollbar-hide">
                    <nav class="space-y-1">
                        <button class="edit-tab w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-space-blue/20 transition-colors active-tab bg-space-blue/30 text-white" data-tab="bookmarks">
                            <i class="fa fa-bookmark mr-2"></i> 书签管理
                        </button>
                        <button class="edit-tab w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-space-blue/20 transition-colors" data-tab="cities">
                            <i class="fa fa-globe mr-2"></i> 城市管理
                        </button>
                        <button class="edit-tab w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-space-blue/20 transition-colors" data-tab="ads">
                            <i class="fa fa-bullhorn mr-2"></i> 广告管理
                        </button>
                        <button class="edit-tab w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-space-blue/20 transition-colors" data-tab="export-import">
                            <i class="fa fa-exchange mr-2"></i> 导入/导出
                        </button>
                    </nav>
                </div>
                
                <!-- 编辑中心内容区 -->
                <div class="flex-1 overflow-y-auto p-6">
                    <!-- 书签管理 -->
                    <div class="edit-content active-content" id="bookmarks-tab">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-white">书签管理</h4>
                            <button id="add-bookmark-btn" class="bg-space-purple hover:bg-space-purple/80 text-white py-1 px-3 rounded-lg text-sm transition-colors">
                                <i class="fa fa-plus mr-1"></i> 添加书签
                            </button>
                        </div>
                        
                        <div id="edit-bookmarks-container" class="space-y-4">
                            <!-- 编辑状态的书签将在这里动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 城市管理 -->
                    <div class="edit-content hidden" id="cities-tab">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-white">城市管理</h4>
                            <button id="add-new-city-btn" class="bg-space-purple hover:bg-space-purple/80 text-white py-1 px-3 rounded-lg text-sm transition-colors">
                                <i class="fa fa-plus mr-1"></i> 添加城市
                            </button>
                        </div>
                        
                        <div id="cities-list" class="space-y-3">
                            <!-- 城市列表将在这里动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 广告管理 -->
                    <div class="edit-content hidden" id="ads-tab">
                        <h4 class="text-lg font-semibold text-white mb-4">广告管理</h4>
                        
                        <div class="space-y-6">
                            <!-- 广告位 1 -->
                            <div class="bg-space-black/50 rounded-lg p-4 border border-gray-800">
                                <h5 class="text-sm font-medium text-gray-300 mb-3">广告位 1</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告图片 (最大3M)</label>
                                        <input type="file" id="ad1-image" accept="image/*" class="w-full text-xs text-gray-400">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告链接</label>
                                        <input type="url" id="ad1-url" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="点击广告跳转的链接">
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="remove-ad1" class="text-xs text-gray-400 hover:text-red-400 transition-colors">
                                            <i class="fa fa-trash mr-1"></i> 移除广告
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 广告位 2 -->
                            <div class="bg-space-black/50 rounded-lg p-4 border border-gray-800">
                                <h5 class="text-sm font-medium text-gray-300 mb-3">广告位 2</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告图片 (最大3M)</label>
                                        <input type="file" id="ad2-image" accept="image/*" class="w-full text-xs text-gray-400">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告链接</label>
                                        <input type="url" id="ad2-url" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="点击广告跳转的链接">
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="remove-ad2" class="text-xs text-gray-400 hover:text-red-400 transition-colors">
                                            <i class="fa fa-trash mr-1"></i> 移除广告
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 广告位 3 -->
                            <div class="bg-space-black/50 rounded-lg p-4 border border-gray-800">
                                <h5 class="text-sm font-medium text-gray-300 mb-3">广告位 3</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告图片 (最大3M)</label>
                                        <input type="file" id="ad3-image" accept="image/*" class="w-full text-xs text-gray-400">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-400 mb-1">广告链接</label>
                                        <input type="url" id="ad3-url" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="点击广告跳转的链接">
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="remove-ad3" class="text-xs text-gray-400 hover:text-red-400 transition-colors">
                                            <i class="fa fa-trash mr-1"></i> 移除广告
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 导入/导出 -->
                    <div class="edit-content hidden" id="export-import-tab">
                        <h4 class="text-lg font-semibold text-white mb-4">导入/导出书签</h4>
                        
                        <div class="space-y-6">
                            <!-- 导入 -->
                            <div class="bg-space-black/50 rounded-lg p-4 border border-gray-800">
                                <h5 class="text-sm font-medium text-gray-300 mb-3">导入书签</h5>
                                <p class="text-xs text-gray-400 mb-3">从浏览器导出的HTML书签文件导入</p>
                                <div>
                                    <input type="file" id="import-bookmarks" accept=".html" class="w-full text-xs text-gray-400 mb-3">
                                    <button id="do-import" class="bg-space-blue hover:bg-space-blue/80 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                        <i class="fa fa-upload mr-1"></i> 导入书签
                                    </button>
                                </div>
                                <div id="import-status" class="mt-3 text-xs hidden"></div>
                            </div>
                            
                            <!-- 导出 -->
                            <div class="bg-space-black/50 rounded-lg p-4 border border-gray-800">
                                <h5 class="text-sm font-medium text-gray-300 mb-3">导出书签</h5>
                                <p class="text-xs text-gray-400 mb-3">导出为HTML文件，可导入到浏览器</p>
                                <button id="do-export" class="bg-space-purple hover:bg-space-purple/80 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                    <i class="fa fa-download mr-1"></i> 导出书签
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-4 border-t border-gray-800 flex justify-end space-x-3">
                <button id="cancel-edit" class="bg-gray-800 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
                    取消
                </button>
                <button id="save-changes" class="bg-space-glow hover:bg-space-glow/80 text-white py-2 px-6 rounded-lg transition-colors">
                    <i class="fa fa-save mr-1"></i> 保存更改
                </button>
            </div>
        </div>
    </div>

    <!-- 添加/编辑书签模态框 -->
    <div id="bookmark-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-space-dark border border-space-purple/50 rounded-xl w-full max-w-md p-6 transform transition-all scale-95 opacity-0" id="bookmark-modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white" id="bookmark-modal-title">添加书签</h3>
                <button id="close-bookmark-modal" class="text-gray-400 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-gray-300 mb-1">文件夹</label>
                    <select id="bookmark-folder" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow">
                        <option value="">-- 无文件夹 --</option>
                        <!-- 文件夹选项将动态生成 -->
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm text-gray-300 mb-1">名称</label>
                    <input type="text" id="bookmark-name" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="网站名称">
                </div>
                
                <div>
                    <label class="block text-sm text-gray-300 mb-1">URL 地址</label>
                    <input type="url" id="bookmark-url" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="https://example.com">
                </div>
                
                <div class="pt-2">
                    <button id="save-bookmark" class="w-full bg-space-purple hover:bg-space-purple/80 text-white py-3 px-4 rounded-lg transition-colors">
                        保存书签
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加城市模态框 -->
    <div id="city-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-space-dark border border-space-purple/50 rounded-xl w-full max-w-md p-6 transform transition-all scale-95 opacity-0" id="city-modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white" id="city-modal-title">添加城市</h3>
                <button id="close-city-modal" class="text-gray-400 hover:text-white">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-gray-300 mb-1">城市名称</label>
                    <input type="text" id="city-name" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="例如：北京">
                </div>
                
                <div>
                    <label class="block text-sm text-gray-300 mb-1">时区 (UTC±X)</label>
                    <input type="text" id="city-timezone" class="w-full bg-space-black/70 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-space-glow" placeholder="例如：+8">
                </div>
                
                <div class="pt-2">
                    <button id="save-city" class="w-full bg-space-purple hover:bg-space-purple/80 text-white py-3 px-4 rounded-lg transition-colors">
                        保存城市
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 确认删除模态框 -->
    <div id="confirm-delete-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-space-dark border border-gray-800 rounded-xl w-full max-w-md p-6 transform transition-all scale-95 opacity-0" id="confirm-delete-content">
            <div class="text-center mb-4">
                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-500/20 text-red-400 mb-3">
                    <i class="fa fa-exclamation-triangle text-xl"></i>
                </div>
                <h3 class="text-lg font-bold text-white">确认删除</h3>
                <p class="text-gray-400 text-sm mt-2" id="delete-confirmation-text">你确定要删除这个项目吗？此操作无法撤销。</p>
            </div>
            
            <div class="flex space-x-3 mt-6">
                <button id="cancel-delete" class="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
                    取消
                </button>
                <button id="confirm-delete" class="flex-1 bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded-lg transition-colors">
                    确认删除
                </button>
            </div>
        </div>
    </div>

    <!-- 加载动画 -->
    <div id="loading" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="flex flex-col items-center">
            <div class="w-16 h-16 border-4 border-space-purple/30 border-t-space-glow rounded-full animate-spin"></div>
            <p class="mt-4 text-white" id="loading-text">加载中...</p>
        </div>
    </div>

    <!-- 通知提示 -->
    <div id="toast" class="fixed bottom-4 right-4 bg-space-dark border border-space-purple/50 rounded-lg p-4 shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50 max-w-xs">
        <div class="flex items-start">
            <div id="toast-icon" class="mr-3 text-space-glow">
                <i class="fa fa-info-circle"></i>
            </div>
            <div>
                <h4 id="toast-title" class="font-medium text-white"></h4>
                <p id="toast-message" class="text-sm text-gray-400 mt-1"></p>
            </div>
        </div>
    </div>

    <script>
        // 应用数据结构
        const appData = {
            bookmarks: {
                folders: [],
                items: []
            },
            cities: [
                { name: "北京", timezone: "+8" },
                { name: "伦敦", timezone: "0" },
                { name: "纽约", timezone: "-4" },
                { name: "东京", timezone: "+9" }
            ],
            ads: {
                ad1: { image: "", url: "" },
                ad2: { image: "", url: "" },
                ad3: { image: "", url: "" }
            },
            github: {
                username: "",
                repo: "",
                token: "",
                validated: false
            },
            stats: {
                startTime: null,
                totalVisits: 0
            }
        };

        // 临时编辑数据
        let editData = JSON.parse(JSON.stringify(appData));
        let currentEditBookmark = null;
        let currentEditCity = null;
        let deleteCallback = null;

        // DOM 元素
        const elements = {
            // 主页面元素
            themeToggle: document.getElementById('theme-toggle'),
            settingsBtn: document.getElementById('settings-btn'),
            mobileMenuBtn: document.getElementById('mobile-menu-btn'),
            mobileMenu: document.getElementById('mobile-menu'),
            searchInput: document.getElementById('search-input'),
            mobileSearchInput: document.getElementById('mobile-search-input'),
            onlineDuration: document.getElementById('online-duration'),
            startTime: document.getElementById('start-time'),
            healthReminder: document.getElementById('health-reminder'),
            reminderStatus: document.getElementById('reminder-status'),
            snoozeReminder: document.getElementById('snooze-reminder'),
            citiesContainer: document.getElementById('cities-container'),
            addCityBtn: document.getElementById('add-city-btn'),
            bookmarksContainer: document.getElementById('bookmarks-container'),
            
            // 模态框相关
            settingsModal: document.getElementById('settings-modal'),
            settingsContent: document.getElementById('settings-content'),
            closeSettings: document.getElementById('close-settings'),
            editCenterModal: document.getElementById('edit-center-modal'),
            editCenterContent: document.getElementById('edit-center-content'),
            closeEditCenter: document.getElementById('close-edit-center'),
            openEditCenter: document.getElementById('open-edit-center'),
            bookmarkModal: document.getElementById('bookmark-modal'),
            bookmarkModalContent: document.getElementById('bookmark-modal-content'),
            bookmarkModalTitle: document.getElementById('bookmark-modal-title'),
            closeBookmarkModal: document.getElementById('close-bookmark-modal'),
            cityModal: document.getElementById('city-modal'),
            cityModalContent: document.getElementById('city-modal-content'),
            closeCityModal: document.getElementById('close-city-modal'),
            confirmDeleteModal: document.getElementById('confirm-delete-modal'),
            confirmDeleteContent: document.getElementById('confirm-delete-content'),
            cancelDelete: document.getElementById('cancel-delete'),
            confirmDelete: document.getElementById('confirm-delete'),
            deleteConfirmationText: document.getElementById('delete-confirmation-text'),
            loading: document.getElementById('loading'),
            loadingText: document.getElementById('loading-text'),
            toast: document.getElementById('toast'),
            toastIcon: document.getElementById('toast-icon'),
            toastTitle: document.getElementById('toast-title'),
            toastMessage: document.getElementById('toast-message'),
            
            // 编辑中心相关
            editTabs: document.querySelectorAll('.edit-tab'),
            editContents: document.querySelectorAll('.edit-content'),
            addBookmarkBtn: document.getElementById('add-bookmark-btn'),
            saveBookmark: document.getElementById('save-bookmark'),
            bookmarkFolder: document.getElementById('bookmark-folder'),
            bookmarkName: document.getElementById('bookmark-name'),
            bookmarkUrl: document.getElementById('bookmark-url'),
            addNewCityBtn: document.getElementById('add-new-city-btn'),
            saveCity: document.getElementById('save-city'),
            cityName: document.getElementById('city-name'),
            cityTimezone: document.getElementById('city-timezone'),
            cancelEdit: document.getElementById('cancel-edit'),
            saveChanges: document.getElementById('save-changes'),
            
            // GitHub 配置相关
            githubUsername: document.getElementById('github-username'),
            githubRepo: document.getElementById('github-repo'),
            githubToken: document.getElementById('github-token'),
            validateGithub: document.getElementById('validate-github'),
            saveGithub: document.getElementById('save-github'),
            githubStatus: document.getElementById('github-status'),
            
            // 导入导出相关
            importBookmarks: document.getElementById('import-bookmarks'),
            doImport: document.getElementById('do-import'),
            importStatus: document.getElementById('import-status'),
            doExport: document.getElementById('do-export'),
            
            // 广告管理相关
            ad1Image: document.getElementById('ad1-image'),
            ad1Url: document.getElementById('ad1-url'),
            removeAd1: document.getElementById('remove-ad1'),
            ad2Image: document.getElementById('ad2-image'),
            ad2Url: document.getElementById('ad2-url'),
            removeAd2: document.getElementById('remove-ad2'),
            ad3Image: document.getElementById('ad3-image'),
            ad3Url: document.getElementById('ad3-url'),
            removeAd3: document.getElementById('remove-ad3'),
            
            // 其他
            bookmarkCount: document.getElementById('bookmark-count'),
            totalBookmarks: document.getElementById('total-bookmarks'),
            currentYear: document.getElementById('current-year'),
            siteHostname: document.getElementById('site-hostname'),
            citiesList: document.getElementById('cities-list'),
            editBookmarksContainer: document.getElementById('edit-bookmarks-container')
        };

        // 初始化事件监听
        function initEventListeners() {
            // 主题切换
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // 设置按钮
            elements.settingsBtn.addEventListener('click', openSettingsModal);
            elements.closeSettings.addEventListener('click', closeSettingsModal);
            
            // 编辑中心按钮（仅保留设置中的入口）
            elements.openEditCenter.addEventListener('click', openEditCenterModal);
            elements.closeEditCenter.addEventListener('click', closeEditCenterModal);
            
            // 移动端菜单
            elements.mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            
            // 编辑中心标签切换
            elements.editTabs.forEach(tab => {
                tab.addEventListener('click', () => switchEditTab(tab.dataset.tab));
            });
            
            // 添加书签
            elements.addBookmarkBtn.addEventListener('click', () => openBookmarkModal());
            
            // 关闭书签模态框
            elements.closeBookmarkModal.addEventListener('click', closeBookmarkModal);
            
            // 保存书签
            elements.saveBookmark.addEventListener('click', saveBookmarkData);
            
            // 添加城市
            elements.addNewCityBtn.addEventListener('click', openCityModal);
            
            // 关闭城市模态框
            elements.closeCityModal.addEventListener('click', closeCityModal);
            
            // 保存城市
            elements.saveCity.addEventListener('click', saveCityData);
            
            // 取消编辑
            elements.cancelEdit.addEventListener('click', closeEditCenterModal);
            
            // 保存更改
            elements.saveChanges.addEventListener('click', saveAllChanges);
            
            // 确认删除相关
            elements.cancelDelete.addEventListener('click', closeConfirmDeleteModal);
            elements.confirmDelete.addEventListener('click', executeDelete);
            
            // GitHub 配置
            elements.validateGithub.addEventListener('click', validateGithubConfig);
            elements.saveGithub.addEventListener('click', saveGithubConfig);
            
            // 导入导出
            elements.doImport.addEventListener('click', importBookmarks);
            elements.doExport.addEventListener('click', exportBookmarks);
            
            // 广告管理
            elements.removeAd1.addEventListener('click', () => removeAd('ad1'));
            elements.removeAd2.addEventListener('click', () => removeAd('ad2'));
            elements.removeAd3.addEventListener('click', () => removeAd('ad3'));
            
            // 健康提醒
            elements.snoozeReminder.addEventListener('click', snoozeReminder);
        }

        // 主题切换功能
        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            const icon = elements.themeToggle.querySelector('i');
            
            if (isDark) {
                icon.classList.remove('fa-sun-o');
                icon.classList.add('fa-moon-o');
                document.body.classList.add('bg-space-black');
                document.body.classList.remove('bg-gray-100', 'text-gray-900');
            } else {
                icon.classList.remove('fa-moon-o');
                icon.classList.add('fa-sun-o');
                document.body.classList.remove('bg-space-black');
                document.body.classList.add('bg-gray-100', 'text-gray-900');
            }
            
            // 保存主题偏好
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // 初始化主题
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // 确定初始主题
            const isDark = savedTheme ? savedTheme === 'dark' : prefersDark;
            
            if (isDark) {
                document.documentElement.classList.add('dark');
                elements.themeToggle.querySelector('i').classList.add('fa-moon-o');
                elements.themeToggle.querySelector('i').classList.remove('fa-sun-o');
            } else {
                document.documentElement.classList.remove('dark');
                elements.themeToggle.querySelector('i').classList.add('fa-sun-o');
                elements.themeToggle.querySelector('i').classList.remove('fa-moon-o');
                document.body.classList.add('bg-gray-100', 'text-gray-900');
                document.body.classList.remove('bg-space-black');
            }
        }

        // 打开设置模态框
        function openSettingsModal() {
            elements.settingsModal.classList.remove('hidden');
            setTimeout(() => {
                elements.settingsContent.classList.remove('scale-95', 'opacity-0');
                elements.settingsContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        // 关闭设置模态框
        function closeSettingsModal() {
            elements.settingsContent.classList.remove('scale-100', 'opacity-100');
            elements.settingsContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.settingsModal.classList.add('hidden');
            }, 300);
        }

        // 打开编辑中心模态框
        function openEditCenterModal() {
            elements.editCenterModal.classList.remove('hidden');
            setTimeout(() => {
                elements.editCenterContent.classList.remove('scale-95', 'opacity-0');
                elements.editCenterContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            closeMobileMenu();
        }

        // 关闭编辑中心模态框
        function closeEditCenterModal() {
            elements.editCenterContent.classList.remove('scale-100', 'opacity-100');
            elements.editCenterContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.editCenterModal.classList.add('hidden');
            }, 300);
        }

        // 切换移动端菜单
        function toggleMobileMenu() {
            elements.mobileMenu.classList.toggle('hidden');
        }

        // 关闭移动端菜单
        function closeMobileMenu() {
            elements.mobileMenu.classList.add('hidden');
        }

        // 切换编辑中心标签
        function switchEditTab(tabId) {
            // 更新标签状态
            elements.editTabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active-tab', 'bg-space-blue/30', 'text-white');
                    tab.classList.remove('hover:bg-space-blue/20');
                } else {
                    tab.classList.remove('active-tab', 'bg-space-blue/30', 'text-white');
                    tab.classList.add('hover:bg-space-blue/20');
                }
            });
            
            // 更新内容区域
            elements.editContents.forEach(content => {
                if (content.id === `${tabId}-tab`) {
                    content.classList.remove('hidden');
                    content.classList.add('active-content');
                } else {
                    content.classList.add('hidden');
                    content.classList.remove('active-content');
                }
            });
        }

        // 打开书签模态框
        function openBookmarkModal(bookmark = null) {
            currentEditBookmark = bookmark;
            
            if (bookmark) {
                elements.bookmarkModalTitle.textContent = '编辑书签';
                elements.bookmarkName.value = bookmark.name || '';
                elements.bookmarkUrl.value = bookmark.url || '';
                elements.bookmarkFolder.value = bookmark.folderId || '';
            } else {
                elements.bookmarkModalTitle.textContent = '添加书签';
                elements.bookmarkName.value = '';
                elements.bookmarkUrl.value = '';
                elements.bookmarkFolder.value = '';
            }
            
            elements.bookmarkModal.classList.remove('hidden');
            setTimeout(() => {
                elements.bookmarkModalContent.classList.remove('scale-95', 'opacity-0');
                elements.bookmarkModalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            
            // 加载文件夹选项
            loadFolderOptions();
        }

        // 关闭书签模态框
        function closeBookmarkModal() {
            elements.bookmarkModalContent.classList.remove('scale-100', 'opacity-100');
            elements.bookmarkModalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.bookmarkModal.classList.add('hidden');
                currentEditBookmark = null;
            }, 300);
        }

        // 保存书签数据
        function saveBookmarkData() {
            const name = elements.bookmarkName.value.trim();
            const url = elements.bookmarkUrl.value.trim();
            const folderId = elements.bookmarkFolder.value;
            
            if (!name || !url) {
                showToast('错误', '名称和URL不能为空', 'error');
                return;
            }
            
            if (currentEditBookmark) {
                // 更新现有书签
                const index = editData.bookmarks.items.findIndex(item => item.id === currentEditBookmark.id);
                if (index !== -1) {
                    editData.bookmarks.items[index] = {
                        ...editData.bookmarks.items[index],
                        name,
                        url,
                        folderId
                    };
                }
            } else {
                // 添加新书签
                editData.bookmarks.items.push({
                    id: Date.now().toString(),
                    name,
                    url,
                    folderId,
                    createdAt: new Date().toISOString()
                });
            }
            
            showToast('成功', currentEditBookmark ? '书签已更新' : '书签已添加', 'success');
            closeBookmarkModal();
            renderEditBookmarks();
        }

        // 打开城市模态框
        function openCityModal(city = null) {
            currentEditCity = city;
            
            if (city) {
                elements.cityModalTitle.textContent = '编辑城市';
                elements.cityName.value = city.name || '';
                elements.cityTimezone.value = city.timezone || '';
            } else {
                elements.cityModalTitle.textContent = '添加城市';
                elements.cityName.value = '';
                elements.cityTimezone.value = '';
            }
            
            elements.cityModal.classList.remove('hidden');
            setTimeout(() => {
                elements.cityModalContent.classList.remove('scale-95', 'opacity-0');
                elements.cityModalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        // 关闭城市模态框
        function closeCityModal() {
            elements.cityModalContent.classList.remove('scale-100', 'opacity-100');
            elements.cityModalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.cityModal.classList.add('hidden');
                currentEditCity = null;
            }, 300);
        }

        // 保存城市数据
        function saveCityData() {
            const name = elements.cityName.value.trim();
            const timezone = elements.cityTimezone.value.trim();
            
            if (!name || !timezone) {
                showToast('错误', '城市名称和时区不能为空', 'error');
                return;
            }
            
            if (!/^[+-]\d+$/.test(timezone)) {
                showToast('错误', '时区格式不正确，应为±X格式', 'error');
                return;
            }
            
            if (currentEditCity) {
                // 更新现有城市
                const index = editData.cities.findIndex(c => c.name === currentEditCity.name);
                if (index !== -1) {
                    editData.cities[index] = { name, timezone };
                }
            } else {
                // 添加新城市
                editData.cities.push({ name, timezone });
            }
            
            showToast('成功', currentEditCity ? '城市已更新' : '城市已添加', 'success');
            closeCityModal();
            renderCitiesList();
            renderCities();
        }

        // 保存所有更改
        function saveAllChanges() {
            // 复制编辑数据到应用数据
            appData.bookmarks = JSON.parse(JSON.stringify(editData.bookmarks));
            appData.cities = JSON.parse(JSON.stringify(editData.cities));
            appData.ads = JSON.parse(JSON.stringify(editData.ads));
            
            // 保存到本地存储
            saveDataToLocalStorage();
            
            // 重新渲染界面
            renderBookmarks();
            renderCities();
            renderAds();
            
            showToast('成功', '所有更改已保存', 'success');
            closeEditCenterModal();
        }

        // 打开确认删除模态框
        function openConfirmDeleteModal(message, callback) {
            elements.deleteConfirmationText.textContent = message;
            deleteCallback = callback;
            
            elements.confirmDeleteModal.classList.remove('hidden');
            setTimeout(() => {
                elements.confirmDeleteContent.classList.remove('scale-95', 'opacity-0');
                elements.confirmDeleteContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        // 关闭确认删除模态框
        function closeConfirmDeleteModal() {
            elements.confirmDeleteContent.classList.remove('scale-100', 'opacity-100');
            elements.confirmDeleteContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.confirmDeleteModal.classList.add('hidden');
                deleteCallback = null;
            }, 300);
        }

        // 执行删除操作
        function executeDelete() {
            if (typeof deleteCallback === 'function') {
                deleteCallback();
            }
            closeConfirmDeleteModal();
        }

        // 显示加载动画
        function showLoading(text = '加载中...') {
            elements.loadingText.textContent = text;
            elements.loading.classList.remove('hidden');
        }

        // 隐藏加载动画
        function hideLoading() {
            elements.loading.classList.add('hidden');
        }

        // 显示通知提示
        function showToast(title, message, type = 'info') {
            elements.toastTitle.textContent = title;
            elements.toastMessage.textContent = message;
            elements.toastIcon.innerHTML = '';
            
            // 设置图标和颜色
            switch (type) {
                case 'success':
                    elements.toastIcon.innerHTML = '<i class="fa fa-check-circle"></i>';
                    elements.toastIcon.className = 'mr-3 text-green-400';
                    break;
                case 'error':
                    elements.toastIcon.innerHTML = '<i class="fa fa-exclamation-circle"></i>';
                    elements.toastIcon.className = 'mr-3 text-red-400';
                    break;
                case 'warning':
                    elements.toastIcon.innerHTML = '<i class="fa fa-exclamation-triangle"></i>';
                    elements.toastIcon.className = 'mr-3 text-yellow-400';
                    break;
                default:
                    elements.toastIcon.innerHTML = '<i class="fa fa-info-circle"></i>';
                    elements.toastIcon.className = 'mr-3 text-space-glow';
            }
            
            // 显示通知
            elements.toast.classList.remove('translate-y-20', 'opacity-0');
            elements.toast.classList.add('translate-y-0', 'opacity-100');
            
            // 3秒后自动隐藏
            setTimeout(() => {
                elements.toast.classList.remove('translate-y-0', 'opacity-100');
                elements.toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // 验证GitHub配置
        function validateGithubConfig() {
            const username = elements.githubUsername.value.trim();
            const repo = elements.githubRepo.value.trim();
            const token = elements.githubToken.value.trim();
            
            if (!username || !repo || !token) {
                showGithubStatus('请填写所有字段', 'error');
                return;
            }
            
            showLoading('验证中...');
            
            // 这里应该有实际的验证逻辑，这里简化处理
            setTimeout(() => {
                hideLoading();
                showGithubStatus('配置验证成功', 'success');
                editData.github.validated = true;
            }, 1500);
        }

        // 保存GitHub配置
        function saveGithubConfig() {
            const username = elements.githubUsername.value.trim();
            const repo = elements.githubRepo.value.trim();
            const token = elements.githubToken.value.trim();
            
            editData.github = {
                username,
                repo,
                token,
                validated: false
            };
            
            showGithubStatus('配置已保存，需要重新验证', 'info');
        }

        // 显示GitHub状态信息
        function showGithubStatus(message, type = 'info') {
            elements.githubStatus.textContent = message;
            elements.githubStatus.classList.remove('hidden', 'bg-green-500/20', 'text-green-400', 'bg-red-500/20', 'text-red-400', 'bg-blue-500/20', 'text-blue-400');
            
            switch (type) {
                case 'success':
                    elements.githubStatus.classList.add('bg-green-500/20', 'text-green-400');
                    break;
                case 'error':
                    elements.githubStatus.classList.add('bg-red-500/20', 'text-red-400');
                    break;
                default:
                    elements.githubStatus.classList.add('bg-blue-500/20', 'text-blue-400');
            }
        }

        // 导入书签
        function importBookmarks() {
            const file = elements.importBookmarks.files[0];
            if (!file) {
                showToast('错误', '请选择要导入的书签文件', 'error');
                return;
            }
            
            if (file.type !== 'text/html' && !file.name.endsWith('.html')) {
                showToast('错误', '请选择HTML格式的书签文件', 'error');
                return;
            }
            
            showLoading('导入中...');
            
            // 这里应该有实际的导入逻辑，这里简化处理
            setTimeout(() => {
                hideLoading();
                elements.importStatus.textContent = '书签导入成功';
                elements.importStatus.classList.remove('hidden', 'text-red-400', 'bg-red-500/20');
                elements.importStatus.classList.add('text-green-400', 'bg-green-500/20');
                
                showToast('成功', '书签导入成功', 'success');
            }, 1500);
        }

        // 导出书签
        function exportBookmarks() {
            showLoading('导出中...');
            
            // 这里应该有实际的导出逻辑，这里简化处理
            setTimeout(() => {
                hideLoading();
                showToast('成功', '书签已导出', 'success');
            }, 1000);
        }

        // 移除广告
        function removeAd(adId) {
            openConfirmDeleteModal(`你确定要移除${adId === 'ad1' ? '第一个' : adId === 'ad2' ? '第二个' : '第三个'}广告吗？`, () => {
                editData.ads[adId] = { image: "", url: "" };
                document.getElementById(`${adId}-image`).value = '';
                document.getElementById(`${adId}-url`).value = '';
                renderAds();
                showToast('成功', '广告已移除', 'success');
            });
        }

        // 稍后提醒
        function snoozeReminder() {
            elements.healthReminder.textContent = '距离下次休息还有 10 分钟';
            showToast('提示', '休息提醒已延迟', 'info');
        }

        // 加载文件夹选项
        function loadFolderOptions() {
            elements.bookmarkFolder.innerHTML = '<option value="">-- 无文件夹 --</option>';
            
            editData.bookmarks.folders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                elements.bookmarkFolder.appendChild(option);
            });
        }

        // 渲染编辑书签列表
        function renderEditBookmarks() {
            elements.editBookmarksContainer.innerHTML = '';
            
            if (editData.bookmarks.items.length === 0) {
                elements.editBookmarksContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fa fa-bookmark-o text-2xl mb-2 opacity-50"></i>
                        <p>暂无书签数据</p>
                        <p class="text-sm mt-1">点击"添加书签"按钮创建新书签</p>
                    </div>
                `;
                return;
            }
            
            // 按文件夹分组
            const folders = { '': [] }; // 无文件夹
            editData.bookmarks.folders.forEach(folder => {
                folders[folder.id] = [];
            });
            
            editData.bookmarks.items.forEach(item => {
                const folderId = item.folderId || '';
                if (folders[folderId] !== undefined) {
                    folders[folderId].push(item);
                } else {
                    folders[''].push(item);
                }
            });
            
            // 先添加无文件夹的书签
            if (folders[''].length > 0) {
                const section = document.createElement('div');
                section.className = 'mb-6';
                
                section.innerHTML = `
                    <h5 class="text-sm font-medium text-gray-300 mb-3">未分类</h5>
                    <div class="space-y-2">
                        ${folders[''].map(item => `
                            <div class="bg-space-black/50 rounded-lg p-3 border border-gray-800 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">${item.name}</div>
                                    <div class="text-xs text-gray-400 truncate max-w-xs">${item.url}</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="edit-bookmark-btn p-1.5 text-gray-400 hover:text-space-glow" data-id="${item.id}">
                                        <i class="fa fa-pencil"></i>
                                    </button>
                                    <button class="delete-bookmark-btn p-1.5 text-gray-400 hover:text-red-400" data-id="${item.id}">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                elements.editBookmarksContainer.appendChild(section);
            }
            
            // 添加带文件夹的书签
            editData.bookmarks.folders.forEach(folder => {
                if (folders[folder.id] && folders[folder.id].length > 0) {
                    const section = document.createElement('div');
                    section.className = 'mb-6';
                    
                    section.innerHTML = `
                        <h5 class="text-sm font-medium text-gray-300 mb-3">${folder.name}</h5>
                        <div class="space-y-2">
                            ${folders[folder.id].map(item => `
                                <div class="bg-space-black/50 rounded-lg p-3 border border-gray-800 flex justify-between items-center">
                                    <div>
                                        <div class="font-medium text-white">${item.name}</div>
                                        <div class="text-xs text-gray-400 truncate max-w-xs">${item.url}</div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="edit-bookmark-btn p-1.5 text-gray-400 hover:text-space-glow" data-id="${item.id}">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button class="delete-bookmark-btn p-1.5 text-gray-400 hover:text-red-400" data-id="${item.id}">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    
                    elements.editBookmarksContainer.appendChild(section);
                }
            });
            
            // 添加事件监听
            document.querySelectorAll('.edit-bookmark-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.dataset.id;
                    const bookmark = editData.bookmarks.items.find(item => item.id === id);
                    if (bookmark) {
                        openBookmarkModal(bookmark);
                    }
                });
            });
            
            document.querySelectorAll('.delete-bookmark-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.dataset.id;
                    const bookmark = editData.bookmarks.items.find(item => item.id === id);
                    if (bookmark) {
                        openConfirmDeleteModal(`你确定要删除书签"${bookmark.name}"吗？`, () => {
                            editData.bookmarks.items = editData.bookmarks.items.filter(item => item.id !== id);
                            renderEditBookmarks();
                            showToast('成功', '书签已删除', 'success');
                        });
                    }
                });
            });
        }

        // 渲染城市列表（编辑中心）
        function renderCitiesList() {
            elements.citiesList.innerHTML = '';
            
            if (editData.cities.length === 0) {
                elements.citiesList.innerHTML = `
                    <div class="text-center py-6 text-gray-500 text-sm">
                        暂无城市数据，请添加城市
                    </div>
                `;
                return;
            }
            
            editData.cities.forEach(city => {
                const cityEl = document.createElement('div');
                cityEl.className = 'bg-space-black/50 rounded-lg p-3 border border-gray-800 flex justify-between items-center';
                
                cityEl.innerHTML = `
                    <div>
                        <div class="font-medium text-white">${city.name}</div>
                        <div class="text-xs text-gray-400">UTC${city.timezone}</div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="edit-city-btn p-1.5 text-gray-400 hover:text-space-glow">
                            <i class="fa fa-pencil"></i>
                        </button>
                        <button class="delete-city-btn p-1.5 text-gray-400 hover:text-red-400">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                `;
                
                // 编辑城市
                cityEl.querySelector('.edit-city-btn').addEventListener('click', () => {
                    openCityModal(city);
                });
                
                // 删除城市
                cityEl.querySelector('.delete-city-btn').addEventListener('click', () => {
                    openConfirmDeleteModal(`你确定要删除城市"${city.name}"吗？`, () => {
                        editData.cities = editData.cities.filter(c => !(c.name === city.name && c.timezone === city.timezone));
                        renderCitiesList();
                        renderCities();
                        showToast('成功', '城市已删除', 'success');
                    });
                });
                
                elements.citiesList.appendChild(cityEl);
            });
        }

        // 渲染城市（主页面）
        function renderCities() {
            elements.citiesContainer.innerHTML = '';
            
            editData.cities.forEach(city => {
                // 计算城市当前时间
                const now = new Date();
                const utcTime = now.getTime() + now.getTimezoneOffset() * 60000;
                const cityTime = new Date(utcTime + parseInt(city.timezone) * 3600000);
                
                const cityEl = document.createElement('div');
                cityEl.className = 'flex justify-between items-center';
                
                cityEl.innerHTML = `
                    <span class="text-gray-300">${city.name}</span>
                    <span class="font-medium">${cityTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })}</span>
                `;
                
                elements.citiesContainer.appendChild(cityEl);
            });
        }

        // 渲染书签（主页面）
        function renderBookmarks() {
            elements.bookmarksContainer.innerHTML = '';
            elements.bookmarkCount.textContent = `(${appData.bookmarks.items.length} 个网站)`;
            elements.totalBookmarks.textContent = appData.bookmarks.items.length;
            
            if (appData.bookmarks.items.length === 0) {
                elements.bookmarksContainer.innerHTML = `
                    <div class="text-center py-10 text-gray-500">
                        <i class="fa fa-folder-open-o text-4xl mb-3 opacity-50"></i>
                        <p>暂无书签数据</p>
                        <p class="text-sm mt-1">请在编辑中心导入书签</p>
                    </div>
                `;
                return;
            }
            
            // 按文件夹分组
            const folders = { '': [] }; // 无文件夹
            appData.bookmarks.folders.forEach(folder => {
                folders[folder.id] = [];
            });
            
            appData.bookmarks.items.forEach(item => {
                const folderId = item.folderId || '';
                if (folders[folderId] !== undefined) {
                    folders[folderId].push(item);
                } else {
                    folders[''].push(item);
                }
            });
            
            // 先添加无文件夹的书签
            if (folders[''].length > 0) {
                const section = document.createElement('div');
                section.className = 'folder folder-expanded';
                
                section.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-semibold text-white flex items-center">
                            <i class="fa fa-folder-open text-space-glow mr-2"></i> 未分类
                        </h3>
                        <span class="text-xs bg-gray-700 px-2 py-0.5 rounded-full">${folders[''].length}</span>
                    </div>
                    <div class="folder-content grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
                        ${folders[''].map(item => `
                            <a href="${item.url}" target="_blank" class="bg-space-dark/60 backdrop-blur-sm rounded-lg p-3 border border-gray-800 hover:border-space-glow/50 transition-all glow-hover flex flex-col items-center text-center">
                                <div class="w-10 h-10 rounded-full bg-space-purple/20 flex items-center justify-center mb-2">
                                    <i class="fa fa-globe text-space-glow"></i>
                                </div>
                                <div class="text-sm font-medium truncate w-full">${item.name}</div>
                            </a>
                        `).join('')}
                    </div>
                `;
                
                elements.bookmarksContainer.appendChild(section);
            }
            
            // 添加带文件夹的书签
            appData.bookmarks.folders.forEach(folder => {
                if (folders[folder.id] && folders[folder.id].length > 0) {
                    const section = document.createElement('div');
                    section.className = 'folder folder-expanded';
                    
                    section.innerHTML = `
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-semibold text-white flex items-center">
                                <i class="fa fa-folder-open text-space-glow mr-2"></i> ${folder.name}
                            </h3>
                            <span class="text-xs bg-gray-700 px-2 py-0.5 rounded-full">${folders[folder.id].length}</span>
                        </div>
                        <div class="folder-content grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
                            ${folders[folder.id].map(item => `
                                <a href="${item.url}" target="_blank" class="bg-space-dark/60 backdrop-blur-sm rounded-lg p-3 border border-gray-800 hover:border-space-glow/50 transition-all glow-hover flex flex-col items-center text-center">
                                    <div class="w-10 h-10 rounded-full bg-space-purple/20 flex items-center justify-center mb-2">
                                        <i class="fa fa-globe text-space-glow"></i>
                                    </div>
                                    <div class="text-sm font-medium truncate w-full">${item.name}</div>
                                </a>
                            `).join('')}
                        </div>
                    `;
                    
                    elements.bookmarksContainer.appendChild(section);
                }
            });
        }

        // 渲染广告
        function renderAds() {
            // 广告位1
            if (appData.ads.ad1.image) {
                document.getElementById('ad-1').innerHTML = `<a href="${appData.ads.ad1.url || '#'}" target="_blank"><img src="${appData.ads.ad1.image}" alt="广告" class="w-full h-full object-cover"></a>`;
            } else {
                document.getElementById('ad-1').innerHTML = `
                    <div class="text-center p-4">
                        <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                        <p class="text-gray-400 text-sm">广告位 1 - 可在编辑中心配置</p>
                    </div>
                `;
            }
            
            // 广告位2
            if (appData.ads.ad2.image) {
                document.getElementById('ad-2').innerHTML = `<a href="${appData.ads.ad2.url || '#'}" target="_blank"><img src="${appData.ads.ad2.image}" alt="广告" class="w-full h-full object-cover"></a>`;
            } else {
                document.getElementById('ad-2').innerHTML = `
                    <div class="text-center p-4">
                        <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                        <p class="text-gray-400 text-sm">广告位 2 - 可在编辑中心配置</p>
                    </div>
                `;
            }
            
            // 广告位3
            if (appData.ads.ad3.image) {
                document.getElementById('ad-3').innerHTML = `<a href="${appData.ads.ad3.url || '#'}" target="_blank"><img src="${appData.ads.ad3.image}" alt="广告" class="w-full h-full object-cover"></a>`;
            } else {
                document.getElementById('ad-3').innerHTML = `
                    <div class="text-center p-4">
                        <i class="fa fa-bullhorn text-2xl text-space-glow/70 mb-2"></i>
                        <p class="text-gray-400 text-sm">广告位 3 - 可在编辑中心配置</p>
                    </div>
                `;
            }
        }

        // 保存数据到本地存储
        function saveDataToLocalStorage() {
            localStorage.setItem('starNavData', JSON.stringify(appData));
        }

        // 从本地存储加载数据
        function loadDataFromLocalStorage() {
            const savedData = localStorage.getItem('starNavData');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    // 合并保存的数据（防止结构变化导致的问题）
                    Object.assign(appData, parsedData);
                    editData = JSON.parse(JSON.stringify(appData));
                } catch (e) {
                    console.error('Failed to parse saved data:', e);
                }
            }
        }

        // 更新在线时长
        function updateOnlineDuration() {
            if (!appData.stats.startTime) {
                appData.stats.startTime = new Date().toISOString();
                elements.startTime.textContent = new Date().toLocaleString();
                saveDataToLocalStorage();
            } else {
                const startTime = new Date(appData.stats.startTime);
                const now = new Date();
                const diff = now - startTime;
                
                // 计算时分秒
                const hours = Math.floor(diff / 3600000);
                const minutes = Math.floor((diff % 3600000) / 60000);
                const seconds = Math.floor((diff % 60000) / 1000);
                
                // 格式化显示
                elements.onlineDuration.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // 创建星空背景
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const count = 150;
            
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // 随机位置和大小
                const size = Math.random() * 2;
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const delay = Math.random() * 3;
                
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.animationDelay = `${delay}s`;
                
                starsContainer.appendChild(star);
            }
        }

        // 创建流星效果
        function createMeteor() {
            const meteorsContainer = document.getElementById('meteors');
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            
            // 随机属性
            const width = Math.random() * 100 + 50;
            const height = 2;
            const x = Math.random() * 100;
            const y = Math.random() * 50;
            const duration = Math.random() * 2 + 1;
            const rotation = Math.random() * 30 + 10;
            
            meteor.style.width = `${width}px`;
            meteor.style.height = `${height}px`;
            meteor.style.left = `${x}%`;
            meteor.style.top = `${y}%`;
            meteor.style.animation = `meteor ${duration}s linear forwards`;
            meteor.style.transform = `rotate(${rotation}deg)`;
            
            meteorsContainer.appendChild(meteor);
            
            // 动画结束后移除
            setTimeout(() => {
                meteor.remove();
            }, duration * 1000);
        }

        // 初始化流星效果
        function initMeteors() {
            // 定时创建流星
            setInterval(createMeteor, 5000);
            
            // 初始创建一个流星
            setTimeout(createMeteor, 1000);
        }

        // 初始化页面
        function init() {
            // 设置当前年份
            elements.currentYear.textContent = new Date().getFullYear();
            
            // 从本地存储加载数据
            loadDataFromLocalStorage();
            
            // 初始化主题
            initTheme();
            
            // 创建星空背景
            createStars();
            
            // 初始化流星效果
            initMeteors();
            
            // 初始化事件监听
            initEventListeners();
            
            // 渲染界面
            renderBookmarks();
            renderCities();
            renderCitiesList();
            renderEditBookmarks();
            renderAds();
            
            // 初始化在线时长更新
            updateOnlineDuration();
            setInterval(updateOnlineDuration, 1000);
            
            // 确保编辑中心按钮始终可见（在设置模态框中）
            elements.openEditCenter.classList.remove('hidden');
        }

        // 添加流星动画样式
        const style = document.createElement('style');
        style.textContent = `
            @keyframes meteor {
                0% {
                    transform: rotate(var(--rotation)) translateX(0);
                    opacity: 1;
                }
                100% {
                    transform: rotate(var(--rotation)) translateX(-200px);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
    