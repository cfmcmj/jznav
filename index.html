<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星际导航 | Space Bookmarks</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%231a202c'/%3E%3Ccircle cx='50' cy='50' r='25' fill='%233b82f6'/%3E%3Ccircle cx='65' cy='35' r='8' fill='white'/%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        space: {
                            dark: '#0a0f1f',
                            darker: '#050810',
                            blue: '#1e3a8a',
                            purple: '#4c1d95',
                            pink: '#ec4899',
                            glow: '#3b82f6',
                            accent: '#8b5cf6'
                        }
                    },
                    fontFamily: {
                        space: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'twinkle': 'twinkle 3s ease-in-out infinite',
                        'orbit': 'orbit 20s linear infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        twinkle: {
                            '0%, 100%': { opacity: 0.6 },
                            '50%': { opacity: 1 }
                        },
                        orbit: {
                            '0%': { transform: 'rotate(0deg) translateX(100px) rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg) translateX(100px) rotate(-360deg)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 0 8px rgba(59, 130, 246, 0.6);
            }
            .glow {
                box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
            }
            .star {
                position: absolute;
                background-color: white;
                border-radius: 50%;
                animation: twinkle 3s infinite;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .folder-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
            }
            .folder-open .folder-content {
                max-height: 2000px;
                transition: max-height 0.6s ease-in;
            }
            .folder-icon {
                transition: transform 0.3s ease;
            }
            .folder-open .folder-icon {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body class="font-space bg-gray-50 text-gray-900 dark:bg-space-dark dark:text-gray-100 transition-colors duration-300 min-h-screen relative overflow-x-hidden">
    <!-- 星空背景 -->
    <div id="stars" class="fixed inset-0 -z-10 pointer-events-none"></div>
    
    <!-- 控制按钮 (滚动时显示，停止滚动后隐藏) -->
    <div id="controls" class="fixed top-4 right-4 z-50 opacity-0 transition-opacity duration-500 flex gap-2">
        <button id="theme-toggle" class="p-2 rounded-full bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-all">
            <i class="fa fa-moon-o dark:hidden text-gray-800"></i>
            <i class="fa fa-sun-o hidden dark:block text-yellow-300"></i>
        </button>
        <button id="settings-btn" class="p-2 rounded-full bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-all" disabled>
            <i class="fa fa-cog text-gray-800 dark:text-gray-200"></i>
        </button>
    </div>

    <!-- 主容器 -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- 头部 -->
        <header class="mb-8 text-center">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2 animate-pulse-slow">
                星际导航
            </h1>
            <p class="text-gray-600 dark:text-gray-400 text-[clamp(1rem,2vw,1.2rem)]">
                探索宇宙中的每一个角落
            </p>
        </header>

        <!-- 搜索框 -->
        <div class="relative mb-8 max-w-2xl mx-auto">
            <input 
                type="text" 
                id="search-input" 
                placeholder="搜索书签..." 
                class="w-full py-3 px-5 pr-12 rounded-full bg-white/80 dark:bg-space-darker/80 backdrop-blur-md border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all shadow-lg"
            >
            <i class="fa fa-search absolute right-5 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>

        <!-- 顶部小组件 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <!-- 在线时长 -->
            <div class="bg-white/70 dark:bg-space-darker/70 backdrop-blur-md rounded-2xl p-5 shadow-lg border border-gray-200 dark:border-gray-800 hover:shadow-xl transition-all group">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-lg text-blue-600 dark:text-blue-400">
                        <i class="fa fa-clock-o mr-2"></i>太空航行时间
                    </h3>
                    <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fa fa-rocket text-blue-500 dark:text-blue-400"></i>
                    </div>
                </div>
                <div class="text-3xl font-bold" id="online-time">00:00:00</div>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">自部署以来</p>
            </div>

            <!-- 健康提醒 -->
            <div class="bg-white/70 dark:bg-space-darker/70 backdrop-blur-md rounded-2xl p-5 shadow-lg border border-gray-200 dark:border-gray-800 hover:shadow-xl transition-all group">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-lg text-purple-600 dark:text-purple-400">
                        <i class="fa fa-heartbeat mr-2"></i>健康提醒
                    </h3>
                    <div class="w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fa fa-moon-o text-purple-500 dark:text-purple-400"></i>
                    </div>
                </div>
                <div class="text-xl font-medium" id="health-reminder">该休息一下了</div>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-2" id="next-reminder">下次提醒: 30分钟后</p>
            </div>

            <!-- 世界时钟 -->
            <div class="bg-white/70 dark:bg-space-darker/70 backdrop-blur-md rounded-2xl p-5 shadow-lg border border-gray-200 dark:border-gray-800 hover:shadow-xl transition-all group">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-lg text-pink-600 dark:text-pink-400">
                        <i class="fa fa-globe mr-2"></i>世界时钟
                    </h3>
                    <div class="w-10 h-10 rounded-full bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fa fa-clock-o text-pink-500 dark:text-pink-400"></i>
                    </div>
                </div>
                <div id="world-clocks" class="space-y-2">
                    <!-- 时钟将通过JS动态添加 -->
                </div>
            </div>
        </div>

        <!-- 广告位1 -->
        <div class="mb-10 rounded-2xl overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-800 h-40 md:h-52 flex items-center justify-center border border-dashed border-gray-300 dark:border-gray-700 relative group" id="ad-1">
            <div class="text-center p-4">
                <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
            </div>
        </div>

        <!-- 书签区域 -->
        <div class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fa fa-bookmark-o text-blue-500 mr-2"></i>
                星际站点
                <span class="ml-2 text-sm font-normal text-gray-500 dark:text-gray-400" id="bookmark-count">(0)</span>
            </h2>
            
            <div id="bookmarks-container" class="space-y-6">
                <!-- 书签文件夹将通过JS动态添加 -->
                <div class="text-center py-10 text-gray-500 dark:text-gray-400">
                    <i class="fa fa-folder-open-o text-4xl mb-3 opacity-50"></i>
                    <p>暂无书签，在编辑中心添加你的第一个站点吧</p>
                </div>
            </div>
        </div>

        <!-- 广告位2 -->
        <div class="mb-10 rounded-2xl overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-800 h-40 md:h-52 flex items-center justify-center border border-dashed border-gray-300 dark:border-gray-700 relative group" id="ad-2">
            <div class="text-center p-4">
                <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
            </div>
        </div>

        <!-- 广告位3 -->
        <div class="mb-10 rounded-2xl overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-800 h-40 md:h-52 flex items-center justify-center border border-dashed border-gray-300 dark:border-gray-700 relative group" id="ad-3">
            <div class="text-center p-4">
                <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
            </div>
        </div>

        <!-- 底部信息 -->
        <footer class="mt-auto py-6 border-t border-gray-200 dark:border-gray-800">
            <div class="dark-white flex flex-col md:flex-row justify-between items-center gap-4">
                <div>共收录<span id="total-sites">0</span>个网站</div>
                <div>Copyright © 2018-<span id="current-year">2023</span> <span id="hostname">space-navigator</span>, All Rights Reserved</div>
            </div>
        </footer>
    </div>

    <!-- 编辑中心模态框 -->
    <div id="edit-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="bg-white dark:bg-space-dark rounded-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl transform scale-95 transition-transform duration-300">
            <!-- 编辑中心头部 -->
            <div class="p-5 border-b border-gray-200 dark:border-gray-800 flex justify-between items-center">
                <h2 class="text-xl font-bold text-blue-600 dark:text-blue-400">
                    <i class="fa fa-pencil-square-o mr-2"></i>编辑中心
                </h2>
                <button id="close-edit-btn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                    <i class="fa fa-times"></i>
                </button>
            </div>

            <!-- 编辑中心内容 -->
            <div class="flex-1 overflow-y-auto p-5">
                <!-- GitHub 验证区域 -->
                <div class="mb-8 p-5 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fa fa-github text-gray-700 dark:text-gray-300 mr-2"></i>
                        GitHub 验证
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1" for="github-username">用户名</label>
                                <input type="text" id="github-username" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1" for="github-repo">仓库名</label>
                                <input type="text" id="github-repo" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" for="github-token">
                                访问令牌 
                                <span class="text-xs text-gray-500 dark:text-gray-400">(需要 repo 权限)</span>
                            </label>
                            <input type="password" id="github-token" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                没有令牌? <a href="https://github.com/settings/tokens/new?scopes=repo" target="_blank" class="text-blue-500 hover:underline">创建一个</a>
                            </p>
                        </div>
                        
                        <div class="flex gap-3">
                            <button id="save-github-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                                保存设置
                            </button>
                            <button id="validate-github-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center">
                                <i class="fa fa-check mr-2"></i>验证并进入编辑中心
                            </button>
                        </div>
                        
                        <div id="github-validation-status" class="hidden p-3 rounded-lg text-sm"></div>
                    </div>
                </div>

                <!-- 书签管理 -->
                <div class="mb-8" id="bookmark-management">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fa fa-bookmark-o mr-2"></i>
                        书签管理
                    </h3>
                    
                    <div class="mb-4 flex flex-wrap gap-3">
                        <button id="import-bookmarks-btn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center" disabled>
                            <i class="fa fa-upload mr-2"></i>导入书签
                        </button>
                        <input type="file" id="bookmark-file-input" accept=".html" class="hidden">
                        
                        <button id="export-bookmarks-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center" disabled>
                            <i class="fa fa-download mr-2"></i>导出书签
                        </button>
                        
                        <button id="add-bookmark-btn" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors flex items-center" disabled>
                            <i class="fa fa-plus mr-2"></i>添加书签
                        </button>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 max-h-96 overflow-y-auto scrollbar-hide">
                        <div id="edit-bookmarks-container" class="space-y-4">
                            <!-- 编辑模式的书签将通过JS动态添加 -->
                            <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <p>请先完成GitHub验证以管理书签</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 城市时钟管理 -->
                <div class="mb-8" id="cities-management">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fa fa-globe mr-2"></i>
                        世界时钟管理
                    </h3>
                    
                    <div class="mb-4">
                        <button id="add-city-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center" disabled>
                            <i class="fa fa-plus mr-2"></i>添加城市
                        </button>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4">
                        <div id="cities-list" class="space-y-3">
                            <!-- 城市列表将通过JS动态添加 -->
                            <div class="text-center py-6 text-gray-500 dark:text-gray-400">
                                <p>请先完成GitHub验证以管理城市</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 广告管理 -->
                <div class="mb-8" id="ads-management">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fa fa-bullhorn mr-2"></i>
                        广告管理
                    </h3>
                    
                    <div class="space-y-6">
                        <!-- 广告位1设置 -->
                        <div class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4">
                            <h4 class="font-medium mb-3">广告位 1</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad1-image">广告图片</label>
                                    <input type="file" id="ad1-image" accept="image/*" class="w-full text-sm text-gray-500 dark:text-gray-400" disabled>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">最大3MB，支持常见图片格式</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad1-url">链接地址</label>
                                    <input type="url" id="ad1-url" placeholder="https://example.com" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button id="remove-ad1-btn" class="px-3 py-1 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors" disabled>
                                    <i class="fa fa-trash mr-1"></i>移除广告
                                </button>
                            </div>
                        </div>
                        
                        <!-- 广告位2设置 -->
                        <div class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4">
                            <h4 class="font-medium mb-3">广告位 2</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad2-image">广告图片</label>
                                    <input type="file" id="ad2-image" accept="image/*" class="w-full text-sm text-gray-500 dark:text-gray-400" disabled>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">最大3MB，支持常见图片格式</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad2-url">链接地址</label>
                                    <input type="url" id="ad2-url" placeholder="https://example.com" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button id="remove-ad2-btn" class="px-3 py-1 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors" disabled>
                                    <i class="fa fa-trash mr-1"></i>移除广告
                                </button>
                            </div>
                        </div>
                        
                        <!-- 广告位3设置 -->
                        <div class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4">
                            <h4 class="font-medium mb-3">广告位 3</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad3-image">广告图片</label>
                                    <input type="file" id="ad3-image" accept="image/*" class="w-full text-sm text-gray-500 dark:text-gray-400" disabled>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">最大3MB，支持常见图片格式</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1" for="ad3-url">链接地址</label>
                                    <input type="url" id="ad3-url" placeholder="https://example.com" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button id="remove-ad3-btn" class="px-3 py-1 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors" disabled>
                                    <i class="fa fa-trash mr-1"></i>移除广告
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 编辑中心底部 -->
            <div class="p-5 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3">
                <button id="cancel-edit-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                    取消
                </button>
                <button id="save-changes-btn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center" disabled>
                    <i class="fa fa-save mr-2"></i>保存更改
                </button>
            </div>
        </div>
    </div>

    <!-- 添加/编辑书签模态框 -->
    <div id="bookmark-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="bg-white dark:bg-space-dark rounded-2xl w-full max-w-md p-6 shadow-2xl transform scale-95 transition-transform duration-300">
            <h3 class="text-xl font-bold mb-4" id="bookmark-modal-title">添加书签</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1" for="bookmark-folder">文件夹</label>
                    <select id="bookmark-folder" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="default">默认文件夹</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1" for="bookmark-name">名称</label>
                    <input type="text" id="bookmark-name" placeholder="网站名称" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1" for="bookmark-url">网址</label>
                    <input type="url" id="bookmark-url" placeholder="https://example.com" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            
            <div class="mt-6 flex justify-end gap-3">
                <button id="cancel-bookmark-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                    取消
                </button>
                <button id="save-bookmark-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                    保存
                </button>
            </div>
        </div>
    </div>

    <!-- 添加城市模态框 -->
    <div id="city-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="bg-white dark:bg-space-dark rounded-2xl w-full max-w-md p-6 shadow-2xl transform scale-95 transition-transform duration-300">
            <h3 class="text-xl font-bold mb-4">添加城市</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1" for="city-name">城市名称</label>
                    <input type="text" id="city-name" placeholder="例如：北京" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1" for="city-timezone">时区</label>
                    <select id="city-timezone" class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <!-- 时区选项将通过JS动态添加 -->
                    </select>
                </div>
            </div>
            
            <div class="mt-6 flex justify-end gap-3">
                <button id="cancel-city-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                    取消
                </button>
                <button id="save-city-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                    保存
                </button>
            </div>
        </div>
    </div>

    <!-- 提示消息组件 -->
    <div id="toast" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 opacity-0 transition-opacity duration-300 flex items-center">
        <i id="toast-icon" class="fa fa-info-circle mr-2"></i>
        <span id="toast-message"></span>
    </div>

    <!-- 加载动画 -->
    <div id="loader" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="bg-white dark:bg-space-dark p-6 rounded-full">
            <div class="w-12 h-12 border-4 border-blue-200 dark:border-blue-800 border-t-blue-500 rounded-full animate-spin"></div>
        </div>
    </div>

    <script>
        // 应用数据结构
        const appData = {
            deploymentDate: new Date(), // 部署日期，实际使用时会从存储中加载
            bookmarks: {
                default: [] // 默认文件夹
            },
            cities: [
                { name: "北京", timezone: "Asia/Shanghai" },
                { name: "纽约", timezone: "America/New_York" },
                { name: "伦敦", timezone: "Europe/London" },
                { name: "东京", timezone: "Asia/Tokyo" }
            ],
            ads: {
                ad1: { image: "", url: "" },
                ad2: { image: "", url: "" },
                ad3: { image: "", url: "" }
            },
            github: {
                username: "",
                repo: "",
                token: "",
                validated: false,
                defaultUsername: "",
                defaultRepo: ""
            },
            healthReminders: [
                "该休息一下了",
                "记得多喝水",
                "远眺放松眼睛",
                "起来活动活动",
                "深呼吸，保持专注"
            ]
        };

        // 当前编辑的书签ID和类型
        let currentEditing = {
            type: null, // 'bookmark' 或 'folder'
            id: null,
            folder: null
        };

        // 初始化时间戳（用于在线时长计算）
        let initTimestamp = Date.now();

        // 定时器ID
        let scrollTimer = null;
        let onlineTimeTimer = null;
        let clockTimer = null;
        let reminderTimer = null;

        // DOM元素
        const elements = {
            themeToggle: document.getElementById('theme-toggle'),
            settingsBtn: document.getElementById('settings-btn'),
            controls: document.getElementById('controls'),
            editModal: document.getElementById('edit-modal'),
            closeEditBtn: document.getElementById('close-edit-btn'),
            cancelEditBtn: document.getElementById('cancel-edit-btn'),
            saveChangesBtn: document.getElementById('save-changes-btn'),
            bookmarksContainer: document.getElementById('bookmarks-container'),
            editBookmarksContainer: document.getElementById('edit-bookmarks-container'),
            importBookmarksBtn: document.getElementById('import-bookmarks-btn'),
            exportBookmarksBtn: document.getElementById('export-bookmarks-btn'),
            addBookmarkBtn: document.getElementById('add-bookmark-btn'),
            bookmarkFileInput: document.getElementById('bookmark-file-input'),
            githubUsername: document.getElementById('github-username'),
            githubRepo: document.getElementById('github-repo'),
            githubToken: document.getElementById('github-token'),
            saveGithubBtn: document.getElementById('save-github-btn'),
            validateGithubBtn: document.getElementById('validate-github-btn'),
            githubValidationStatus: document.getElementById('github-validation-status'),
            bookmarkModal: document.getElementById('bookmark-modal'),
            bookmarkModalTitle: document.getElementById('bookmark-modal-title'),
            bookmarkFolder: document.getElementById('bookmark-folder'),
            bookmarkName: document.getElementById('bookmark-name'),
            bookmarkUrl: document.getElementById('bookmark-url'),
            cancelBookmarkBtn: document.getElementById('cancel-bookmark-btn'),
            saveBookmarkBtn: document.getElementById('save-bookmark-btn'),
            addCityBtn: document.getElementById('add-city-btn'),
            citiesList: document.getElementById('cities-list'),
            worldClocks: document.getElementById('world-clocks'),
            cityModal: document.getElementById('city-modal'),
            cityName: document.getElementById('city-name'),
            cityTimezone: document.getElementById('city-timezone'),
            cancelCityBtn: document.getElementById('cancel-city-btn'),
            saveCityBtn: document.getElementById('save-city-btn'),
            ad1Image: document.getElementById('ad1-image'),
            ad1Url: document.getElementById('ad1-url'),
            removeAd1Btn: document.getElementById('remove-ad1-btn'),
            ad2Image: document.getElementById('ad2-image'),
            ad2Url: document.getElementById('ad2-url'),
            removeAd2Btn: document.getElementById('remove-ad2-btn'),
            ad3Image: document.getElementById('ad3-image'),
            ad3Url: document.getElementById('ad3-url'),
            removeAd3Btn: document.getElementById('remove-ad3-btn'),
            ad1: document.getElementById('ad-1'),
            ad2: document.getElementById('ad-2'),
            ad3: document.getElementById('ad-3'),
            searchInput: document.getElementById('search-input'),
            onlineTime: document.getElementById('online-time'),
            healthReminder: document.getElementById('health-reminder'),
            nextReminder: document.getElementById('next-reminder'),
            totalSites: document.getElementById('total-sites'),
            currentYear: document.getElementById('current-year'),
            hostname: document.getElementById('hostname'),
            bookmarkCount: document.getElementById('bookmark-count'),
            toast: document.getElementById('toast'),
            toastIcon: document.getElementById('toast-icon'),
            toastMessage: document.getElementById('toast-message'),
            loader: document.getElementById('loader')
        };

        // 初始化函数
        async function init() {
            // 设置当前年份
            elements.currentYear.textContent = new Date().getFullYear();
            
            // 生成星空背景
            createStars();
            
            // 加载本地存储数据
            loadLocalStorageData();
            
            // 从GitHub加载数据
            await loadDataFromGitHub();
            
            // 初始化主题
            initTheme();
            
            // 初始化事件监听
            initEventListeners();
            
            // 渲染书签
            renderBookmarks();
            
            // 渲染编辑中心的书签
            renderEditBookmarks();
            
            // 初始化城市和时钟
            initTimezones();
            renderCities();
            updateClocks();
            
            // 启动在线时长计时器
            startOnlineTimeTimer();
            
            // 启动健康提醒
            startHealthReminders();
            
            // 渲染广告
            renderAds();
            
            // 更新书签计数
            updateBookmarkCount();
        }

        // 创建星空背景
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starsCount = 150;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // 随机位置
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                
                // 随机大小
                const size = Math.random() * 2 + 1;
                
                // 随机亮度和闪烁动画延迟
                const opacity = Math.random() * 0.8 + 0.2;
                const delay = Math.random() * 3;
                
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.opacity = opacity;
                star.style.animationDelay = `${delay}s`;
                
                starsContainer.appendChild(star);
            }
        }

        // 初始化主题
        function initTheme() {
            // 检查用户偏好
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }

        // 切换主题
        function toggleTheme() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        }

        // 显示控制按钮
        function showControls() {
            elements.controls.classList.remove('opacity-0');
            elements.controls.classList.add('opacity-100');
            
            // 清除之前的计时器
            if (scrollTimer) clearTimeout(scrollTimer);
            
            // 3秒后隐藏控制按钮
            scrollTimer = setTimeout(() => {
                elements.controls.classList.remove('opacity-100');
                elements.controls.classList.add('opacity-0');
            }, 3000);
        }

        // 加载本地存储数据
        function loadLocalStorageData() {
            const savedData = localStorage.getItem('spaceBookmarksData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(appData, parsedData);
                
                // 恢复GitHub设置
                elements.githubUsername.value = appData.github.username;
                elements.githubRepo.value = appData.github.repo;
                elements.githubToken.value = appData.github.token;
            }
            
            // 检查是否有默认仓库信息（由deploy.yml注入）
            if (window.defaultRepoInfo) {
                appData.github.defaultUsername = window.defaultRepoInfo.username;
                appData.github.defaultRepo = window.defaultRepoInfo.repo;
                
                // 如果没有设置过仓库信息，使用默认值
                if (!appData.github.username && !appData.github.repo) {
                    elements.githubUsername.value = appData.github.defaultUsername;
                    elements.githubRepo.value = appData.github.defaultRepo;
                }
            }
            
            // 更新主机名显示
            elements.hostname.textContent = appData.github.username || appData.github.defaultUsername || 'space-navigator';
        }

        // 保存数据到本地存储
        function saveLocalStorageData() {
            localStorage.setItem('spaceBookmarksData', JSON.stringify(appData));
        }

        // 从GitHub加载数据
        async function loadDataFromGitHub() {
            showLoader();
            
            try {
                let url;
                const username = appData.github.username || appData.github.defaultUsername;
                const repo = appData.github.repo || appData.github.defaultRepo;
                
                if (!username || !repo) {
                    hideLoader();
                    showToast('信息', '未配置GitHub仓库信息，使用本地数据', 'info');
                    return;
                }
                
                // 无token时使用公开地址
                if (!appData.github.token) {
                    url = `https://raw.githubusercontent.com/${username}/${repo}/main/bookmarks.json`;
                } else {
                    url = `https://api.github.com/repos/${username}/${repo}/contents/bookmarks.json`;
                }
                
                const headers = {};
                if (appData.github.token) {
                    headers['Authorization'] = `token ${appData.github.token}`;
                }
                
                const response = await fetch(url, { headers });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                let data;
                if (appData.github.token) {
                    const apiData = await response.json();
                    data = JSON.parse(atob(apiData.content));
                } else {
                    data = await response.json();
                }
                
                // 合并数据（新数据覆盖旧数据）
                if (data.bookmarks) appData.bookmarks = data.bookmarks;
                if (data.cities) appData.cities = data.cities;
                if (data.ads) appData.ads = data.ads;
                if (data.deploymentDate) appData.deploymentDate = new Date(data.deploymentDate);
                
                showToast('成功', '从GitHub加载数据成功', 'success');
            } catch (error) {
                console.error('从GitHub加载数据失败:', error);
                showToast('错误', '从GitHub加载数据失败，使用本地数据', 'error');
            } finally {
                hideLoader();
            }
        }

        // 保存数据到GitHub
        async function saveDataToGitHub() {
            showLoader();
            
            try {
                const username = appData.github.username || appData.github.defaultUsername;
                const repo = appData.github.repo || appData.github.defaultRepo;
                
                if (!username || !repo) {
                    throw new Error('未配置GitHub仓库信息');
                }
                
                if (!appData.github.token) {
                    throw new Error('需要GitHub令牌才能保存更改');
                }
                
                // 准备要保存的数据
                const dataToSave = {
                    bookmarks: appData.bookmarks,
                    cities: appData.cities,
                    ads: appData.ads,
                    deploymentDate: appData.deploymentDate.toISOString()
                };
                
                // 字符串化并编码
                const content = btoa(unescape(encodeURIComponent(JSON.stringify(dataToSave, null, 2))));
                
                // 先获取文件的SHA（用于更新）
                const getUrl = `https://api.github.com/repos/${username}/${repo}/contents/bookmarks.json`;
                const getResponse = await fetch(getUrl, {
                    headers: {
                        'Authorization': `token ${appData.github.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                let sha = '';
                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    sha = fileData.sha;
                }
                
                // 保存数据
                const url = `https://api.github.com/repos/${username}/${repo}/contents/bookmarks.json`;
                const response = await fetch(url, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${appData.github.token}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: 'Update bookmarks via Space Navigator',
                        content: content,
                        sha: sha // 只有更新时需要
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
                }
                
                // 保存到本地存储
                saveLocalStorageData();
                
                hideLoader();
                showToast('成功', '数据已成功保存到GitHub', 'success');
                return true;
            } catch (error) {
                console.error('保存数据到GitHub失败:', error);
                hideLoader();
                showToast('错误', `保存数据失败: ${error.message}`, 'error');
                return false;
            }
        }

        // 验证GitHub令牌
        async function validateGitHubToken() {
            showLoader();
            
            const token = elements.githubToken.value.trim();
            if (!token) {
                hideLoader();
                showValidationMessage('请输入GitHub令牌', 'error');
                return false;
            }
            
            try {
                const response = await fetch('https://api.github.com/user', {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error('无效的令牌或权限不足');
                }
                
                // 验证成功
                appData.github.token = token;
                appData.github.username = elements.githubUsername.value.trim();
                appData.github.repo = elements.githubRepo.value.trim();
                appData.github.validated = true;
                
                // 保存到本地
                saveLocalStorageData();
                
                hideLoader();
                showValidationMessage('验证成功！现在可以使用编辑功能了', 'success');
                updateEditFeaturesStatus(true);
                
                return true;
            } catch (error) {
                console.error('GitHub令牌验证失败:', error);
                hideLoader();
                showValidationMessage(`验证失败: ${error.message}`, 'error');
                return false;
            }
        }

        // 显示验证消息
        function showValidationMessage(message, type) {
            const statusEl = elements.githubValidationStatus;
            statusEl.textContent = message;
            statusEl.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
            
            if (type === 'success') {
                statusEl.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-900/30', 'dark:text-green-400');
            } else {
                statusEl.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-900/30', 'dark:text-red-400');
            }
        }

        // 更新编辑功能状态
        function updateEditFeaturesStatus(enabled) {
            const buttons = [
                elements.importBookmarksBtn,
                elements.exportBookmarksBtn,
                elements.addBookmarkBtn,
                elements.saveChangesBtn,
                elements.addCityBtn,
                elements.ad1Image,
                elements.ad1Url,
                elements.removeAd1Btn,
                elements.ad2Image,
                elements.ad2Url,
                elements.removeAd2Btn,
                elements.ad3Image,
                elements.ad3Url,
                elements.removeAd3Btn
            ];
            
            buttons.forEach(btn => {
                btn.disabled = !enabled;
            });
            
            // 如果启用了编辑功能，重新渲染编辑中心的内容
            if (enabled) {
                renderEditBookmarks();
                renderCitiesList();
            }
            
            // 更新设置按钮状态
            elements.settingsBtn.disabled = !enabled;
        }

        // 渲染书签
        function renderBookmarks(filter = '') {
            const container = elements.bookmarksContainer;
            container.innerHTML = '';
            
            // 如果没有书签
            const hasBookmarks = Object.values(appData.bookmarks).some(folder => folder.length > 0);
            if (!hasBookmarks) {
                container.innerHTML = `
                    <div class="text-center py-10 text-gray-500 dark:text-gray-400">
                        <i class="fa fa-folder-open-o text-4xl mb-3 opacity-50"></i>
                        <p>暂无书签，在编辑中心添加你的第一个站点吧</p>
                    </div>
                `;
                return;
            }
            
            // 渲染每个文件夹
            Object.entries(appData.bookmarks).forEach(([folderName, bookmarks]) => {
                // 过滤书签
                let filteredBookmarks = bookmarks;
                if (filter) {
                    const lowerFilter = filter.toLowerCase();
                    filteredBookmarks = bookmarks.filter(bm => 
                        bm.name.toLowerCase().includes(lowerFilter) || 
                        bm.url.toLowerCase().includes(lowerFilter)
                    );
                }
                
                // 如果过滤后没有书签，跳过该文件夹
                if (filteredBookmarks.length === 0) return;
                
                // 创建文件夹元素
                const folderEl = document.createElement('div');
                folderEl.className = 'folder bg-white/70 dark:bg-space-darker/70 backdrop-blur-md rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-800';
                
                // 文件夹标题
                const folderHeader = document.createElement('div');
                folderHeader.className = 'folder-header flex items-center justify-between mb-4 cursor-pointer';
                folderHeader.innerHTML = `
                    <h3 class="font-semibold text-lg flex items-center">
                        <i class="fa fa-folder folder-icon mr-2 text-yellow-500"></i>
                        ${folderName === 'default' ? '默认文件夹' : folderName}
                        <span class="ml-2 text-sm font-normal text-gray-500 dark:text-gray-400">(${filteredBookmarks.length})</span>
                    </h3>
                `;
                
                // 文件夹内容
                const folderContent = document.createElement('div');
                folderContent.className = 'folder-content';
                
                // 书签网格
                const bookmarksGrid = document.createElement('div');
                bookmarksGrid.className = 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3';
                
                // 添加书签
                filteredBookmarks.forEach(bookmark => {
                    // 获取域名用于favicon
                    let domain = '';
                    try {
                        const url = new URL(bookmark.url);
                        domain = url.hostname;
                    } catch (e) {
                        domain = bookmark.url;
                    }
                    
                    // 生成favicon或使用首字母
                    let faviconHtml = '';
                    if (domain) {
                        faviconHtml = `<img src="https://picsum.photos/seed/${domain}/32/32" alt="${domain}" class="w-6 h-6 rounded mr-2">`;
                    } else {
                        const firstChar = bookmark.name.charAt(0).toUpperCase();
                        faviconHtml = `<div class="w-6 h-6 rounded bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 text-xs mr-2">${firstChar}</div>`;
                    }
                    
                    const bookmarkEl = document.createElement('a');
                    bookmarkEl.href = bookmark.url;
                    bookmarkEl.target = '_blank';
                    bookmarkEl.className = 'flex items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm truncate group';
                    bookmarkEl.innerHTML = `
                        ${faviconHtml}
                        <span class="truncate">${bookmark.name}</span>
                    `;
                    
                    bookmarksGrid.appendChild(bookmarkEl);
                });
                
                folderContent.appendChild(bookmarksGrid);
                folderEl.appendChild(folderHeader);
                folderEl.appendChild(folderContent);
                
                // 添加文件夹点击事件（展开/折叠）
                folderHeader.addEventListener('click', () => {
                    folderEl.classList.toggle('folder-open');
                });
                
                // 默认展开第一个文件夹
                if (container.children.length === 0) {
                    folderEl.classList.add('folder-open');
                }
                
                container.appendChild(folderEl);
            });
        }

        // 渲染编辑中心的书签
        function renderEditBookmarks() {
            const container = elements.editBookmarksContainer;
            container.innerHTML = '';
            
            // 如果未验证，显示提示
            if (!appData.github.validated) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <p>请先完成GitHub验证以管理书签</p>
                    </div>
                `;
                return;
            }
            
            // 如果没有书签
            const hasBookmarks = Object.values(appData.bookmarks).some(folder => folder.length > 0);
            if (!hasBookmarks) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <p>暂无书签，点击"添加书签"按钮开始添加</p>
                    </div>
                `;
                return;
            }
            
            // 更新文件夹下拉列表
            updateFolderSelect();
            
            // 渲染每个文件夹
            Object.entries(appData.bookmarks).forEach(([folderName, bookmarks]) => {
                // 文件夹容器
                const folderEl = document.createElement('div');
                folderEl.className = 'mb-6';
                
                // 文件夹标题
                const folderHeader = document.createElement('div');
                folderHeader.className = 'flex items-center justify-between mb-3';
                folderHeader.innerHTML = `
                    <h4 class="font-medium text-gray-800 dark:text-gray-200 flex items-center">
                        <i class="fa fa-folder mr-2 text-yellow-500"></i>
                        ${folderName === 'default' ? '默认文件夹' : folderName}
                        <span class="ml-2 text-sm font-normal text-gray-500 dark:text-gray-400">(${bookmarks.length})</span>
                    </h4>
                    <button class="rename-folder-btn text-sm text-blue-500 hover:text-blue-600" data-folder="${folderName}">
                        <i class="fa fa-pencil mr-1"></i>重命名
                    </button>
                `;
                
                // 书签列表
                const bookmarksList = document.createElement('div');
                bookmarksList.className = 'space-y-2 pl-6';
                
                // 添加书签
                bookmarks.forEach((bookmark, index) => {
                    const bookmarkEl = document.createElement('div');
                    bookmarkEl.className = 'flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-800/70 rounded-lg';
                    bookmarkEl.innerHTML = `
                        <div class="flex items-center flex-1 min-w-0">
                            <div class="mr-3 truncate">
                                <div class="font-medium truncate">${bookmark.name}</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400 truncate">${bookmark.url}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 ml-3">
                            <button class="edit-bookmark-btn p-1 text-blue-500 hover:text-blue-600" data-folder="${folderName}" data-index="${index}">
                                <i class="fa fa-pencil"></i>
                            </button>
                            <button class="delete-bookmark-btn p-1 text-red-500 hover:text-red-600" data-folder="${folderName}" data-index="${index}">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    bookmarksList.appendChild(bookmarkEl);
                });
                
                folderEl.appendChild(folderHeader);
                folderEl.appendChild(bookmarksList);
                container.appendChild(folderEl);
                
                // 添加重命名文件夹事件
                folderEl.querySelector('.rename-folder-btn').addEventListener('click', (e) => {
                    const folder = e.currentTarget.dataset.folder;
                    renameFolder(folder);
                });
            });
            
            // 添加编辑和删除书签事件监听
            document.querySelectorAll('.edit-bookmark-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const folder = e.currentTarget.dataset.folder;
                    const index = parseInt(e.currentTarget.dataset.index);
                    editBookmark(folder, index);
                });
            });
            
            document.querySelectorAll('.delete-bookmark-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const folder = e.currentTarget.dataset.folder;
                    const index = parseInt(e.currentTarget.dataset.index);
                    deleteBookmark(folder, index);
                });
            });
        }

        // 更新文件夹下拉列表
        function updateFolderSelect() {
            const select = elements.bookmarkFolder;
            select.innerHTML = '';
            
            Object.keys(appData.bookmarks).forEach(folderName => {
                const option = document.createElement('option');
                option.value = folderName;
                option.textContent = folderName === 'default' ? '默认文件夹' : folderName;
                select.appendChild(option);
            });
        }

        // 重命名文件夹
        function renameFolder(oldName) {
            const newName = prompt(`重命名文件夹"${oldName === 'default' ? '默认文件夹' : oldName}"`, oldName);
            
            if (!newName || newName.trim() === '' || newName === oldName) {
                return;
            }
            
            // 检查文件夹名是否已存在
            if (appData.bookmarks.hasOwnProperty(newName)) {
                showToast('错误', '文件夹名已存在', 'error');
                return;
            }
            
            // 创建新文件夹并复制内容
            appData.bookmarks[newName] = appData.bookmarks[oldName];
            
            // 删除旧文件夹
            delete appData.bookmarks[oldName];
            
            // 重新渲染
            renderEditBookmarks();
            showToast('成功', '文件夹已重命名', 'success');
        }

        // 添加书签
        function addBookmark() {
            currentEditing = { type: 'bookmark', id: null, folder: null };
            
            elements.bookmarkModalTitle.textContent = '添加书签';
            elements.bookmarkName.value = '';
            elements.bookmarkUrl.value = '';
            
            openModal(elements.bookmarkModal);
        }

        // 编辑书签
        function editBookmark(folder, index) {
            const bookmark = appData.bookmarks[folder][index];
            
            currentEditing = { type: 'bookmark', id: index, folder: folder };
            
            elements.bookmarkModalTitle.textContent = '编辑书签';
            elements.bookmarkFolder.value = folder;
            elements.bookmarkName.value = bookmark.name;
            elements.bookmarkUrl.value = bookmark.url;
            
            openModal(elements.bookmarkModal);
        }

        // 保存书签
        function saveBookmark() {
            const folder = elements.bookmarkFolder.value;
            const name = elements.bookmarkName.value.trim();
            const url = elements.bookmarkUrl.value.trim();
            
            if (!name || !url) {
                showToast('错误', '名称和网址不能为空', 'error');
                return;
            }
            
            // 确保URL格式正确
            let formattedUrl = url;
            if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {
                formattedUrl = 'https://' + formattedUrl;
            }
            
            if (currentEditing.type === 'bookmark' && currentEditing.id !== null && currentEditing.folder) {
                // 更新现有书签
                // 如果文件夹变了，先删除再添加
                if (currentEditing.folder !== folder) {
                    appData.bookmarks[currentEditing.folder].splice(currentEditing.id, 1);
                    appData.bookmarks[folder].push({ name, url: formattedUrl });
                } else {
                    // 同一文件夹内更新
                    appData.bookmarks[folder][currentEditing.id] = { name, url: formattedUrl };
                }
                showToast('成功', '书签已更新', 'success');
            } else {
                // 添加新书签
                // 检查是否已存在（去重）
                const exists = appData.bookmarks[folder].some(bm => 
                    bm.url.toLowerCase() === formattedUrl.toLowerCase()
                );
                
                if (exists) {
                    showToast('提示', '该书签已存在', 'info');
                    closeModal(elements.bookmarkModal);
                    return;
                }
                
                appData.bookmarks[folder].push({ name, url: formattedUrl });
                showToast('成功', '书签已添加', 'success');
            }
            
            // 重新渲染
            renderEditBookmarks();
            closeModal(elements.bookmarkModal);
        }

        // 删除书签
        function deleteBookmark(folder, index) {
            const bookmark = appData.bookmarks[folder][index];
            
            if (confirm(`确定要删除书签"${bookmark.name}"吗？`)) {
                appData.bookmarks[folder].splice(index, 1);
                
                // 如果文件夹为空，删除文件夹
                if (appData.bookmarks[folder].length === 0 && folder !== 'default') {
                    delete appData.bookmarks[folder];
                }
                
                // 重新渲染
                renderEditBookmarks();
                showToast('成功', '书签已删除', 'success');
            }
        }

        // 导入书签
        function importBookmarks(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    
                    // 简单解析书签HTML文件
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(content, 'text/html');
                    
                    // 查找所有A标签
                    const bookmarks = doc.querySelectorAll('a');
                    const importedCount = { total: 0, new: 0 };
                    
                    bookmarks.forEach(link => {
                        importedCount.total++;
                        
                        const name = link.textContent.trim();
                        let url = link.getAttribute('href');
                        
                        if (!url || !name) return;
                        
                        // 确保URL格式正确
                        if (!url.startsWith('http://') && !url.startsWith('https://')) {
                            url = 'https://' + url;
                        }
                        
                        // 获取文件夹（从父节点H3获取）
                        let folder = 'default';
                        const parentH3 = link.closest('dl').previousElementSibling;
                        if (parentH3 && parentH3.tagName === 'H3') {
                            folder = parentH3.textContent.trim().replace(/\s+/g, '_');
                            
                            // 如果文件夹不存在，创建它
                            if (!appData.bookmarks[folder]) {
                                appData.bookmarks[folder] = [];
                            }
                        }
                        
                        // 检查是否已存在（去重）
                        const exists = appData.bookmarks[folder].some(bm => 
                            bm.url.toLowerCase() === url.toLowerCase()
                        );
                        
                        if (!exists) {
                            appData.bookmarks[folder].push({ name, url });
                            importedCount.new++;
                        }
                    });
                    
                    // 重新渲染
                    renderEditBookmarks();
                    showToast('成功', `共导入 ${importedCount.total} 个书签，新增 ${importedCount.new} 个（已去重）`, 'success');
                } catch (error) {
                    console.error('导入书签失败:', error);
                    showToast('错误', '导入书签失败，请确保文件格式正确', 'error');
                }
            };
            
            reader.readAsText(file);
        }

        // 导出书签
        function exportBookmarks() {
            // 创建HTML格式的书签
            let html = `<!DOCTYPE NETSCAPE-Bookmark-file-1>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>书签导出</TITLE>
<H1>星际导航书签</H1>
<DL><p>`;
            
            // 添加每个文件夹
            Object.entries(appData.bookmarks).forEach(([folderName, bookmarks]) => {
                if (bookmarks.length === 0) return;
                
                const displayName = folderName === 'default' ? '默认文件夹' : folderName;
                
                html += `
    <DT><H3>${displayName}</H3>
    <DL><p>`;
                
                // 添加每个书签
                bookmarks.forEach(bookmark => {
                    html += `
        <DT><A HREF="${bookmark.url}">${bookmark.name}</A>`;
                });
                
                html += `
    </DL><p>`;
            });
            
            html += `
</DL><p>`;
            
            // 创建下载
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `space-bookmarks-${new Date().toISOString().slice(0, 10)}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('成功', '书签已导出', 'success');
        }

        // 初始化时区列表
        function initTimezones() {
            const timezones = [
                'Asia/Shanghai', 'Asia/Tokyo', 'Asia/Seoul', 'Asia/Hong_Kong', 
                'Asia/Singapore', 'Europe/London', 'Europe/Paris', 'Europe/Berlin',
                'America/New_York', 'America/Los_Angeles', 'America/Chicago',
                'Australia/Sydney', 'Australia/Melbourne', 'Africa/Cairo',
                'Pacific/Midway', 'Pacific/Honolulu', 'America/Anchorage',
                'America/Tijuana', 'America/Phoenix', 'America/Chihuahua',
                'America/Denver', 'America/Chicago', 'America/Mexico_City',
                'America/Regina', 'America/Bogota', 'America/New_York',
                'America/Caracas', 'America/Santiago', 'America/Saopaulo',
                'America/Buenos_Aires', 'Atlantic/Azores', 'Africa/Lagos',
                'Europe/London', 'Europe/Amsterdam', 'Europe/Istanbul',
                'Africa/Johannesburg', 'Asia/Dubai', 'Asia/Kolkata',
                'Asia/Dhaka', 'Asia/Bangkok', 'Asia/Shanghai',
                'Asia/Tokyo', 'Australia/Perth', 'Australia/Sydney',
                'Pacific/Fiji', 'Pacific/Auckland'
            ];
            
            const select = elements.cityTimezone;
            select.innerHTML = '';
            
            timezones.forEach(tz => {
                const option = document.createElement('option');
                option.value = tz;
                option.textContent = tz.replace('_', ' ');
                select.appendChild(option);
            });
        }

        // 渲染城市列表（编辑中心）
        function renderCitiesList() {
            const container = elements.citiesList;
            container.innerHTML = '';
            
            // 如果未验证，显示提示
            if (!appData.github.validated) {
                container.innerHTML = `
                    <div class="text-center py-6 text-gray-500 dark:text-gray-400">
                        <p>请先完成GitHub验证以管理城市</p>
                    </div>
                `;
                return;
            }
            
            // 如果没有城市
            if (appData.cities.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-6 text-gray-500 dark:text-gray-400">
                        <p>暂无城市，点击"添加城市"按钮开始添加</p>
                    </div>
                `;
                return;
            }
            
            // 渲染每个城市
            appData.cities.forEach((city, index) => {
                const cityEl = document.createElement('div');
                cityEl.className = 'flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800/70 rounded-lg';
                cityEl.innerHTML = `
                    <div>
                        <div class="font-medium">${city.name}</div>
                        <div class="text-xs text-gray-500 dark:text-gray-400">${city.timezone.replace('_', ' ')}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="edit-city-btn p-1 text-blue-500 hover:text-blue-600" data-index="${index}">
                            <i class="fa fa-pencil"></i>
                        </button>
                        <button class="delete-city-btn p-1 text-red-500 hover:text-red-600" data-index="${index}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                `;
                
                container.appendChild(cityEl);
            });
            
            // 添加编辑和删除城市事件监听
            document.querySelectorAll('.edit-city-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.currentTarget.dataset.index);
                    editCity(index);
                });
            });
            
            document.querySelectorAll('.delete-city-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.currentTarget.dataset.index);
                    deleteCity(index);
                });
            });
        }

        // 渲染世界时钟（主页）
        function renderCities() {
            renderCitiesList();
            updateClocks();
        }

        // 更新时钟显示
        function updateClocks() {
            const container = elements.worldClocks;
            container.innerHTML = '';
            
            appData.cities.forEach(city => {
                // 获取城市当前时间
                const options = { 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit',
                    hour12: false
                };
                
                const date = new Date();
                const formatter = new Intl.DateTimeFormat('zh-CN', {
                    ...options,
                    timeZone: city.timezone
                });
                
                const timeString = formatter.format(date);
                
                const cityClock = document.createElement('div');
                cityClock.className = 'flex justify-between items-center';
                cityClock.innerHTML = `
                    <span>${city.name}</span>
                    <span class="font-mono font-medium">${timeString}</span>
                `;
                
                container.appendChild(cityClock);
            });
        }

        // 添加城市
        function addCity() {
            currentEditing = { type: 'city', id: null };
            
            elements.cityName.value = '';
            elements.cityTimezone.value = 'Asia/Shanghai';
            
            openModal(elements.cityModal);
        }

        // 编辑城市
        function editCity(index) {
            const city = appData.cities[index];
            
            currentEditing = { type: 'city', id: index };
            
            elements.cityName.value = city.name;
            elements.cityTimezone.value = city.timezone;
            
            openModal(elements.cityModal);
        }

        // 保存城市
        function saveCity() {
            const name = elements.cityName.value.trim();
            const timezone = elements.cityTimezone.value;
            
            if (!name) {
                showToast('错误', '城市名称不能为空', 'error');
                return;
            }
            
            if (currentEditing.type === 'city' && currentEditing.id !== null) {
                // 更新现有城市
                appData.cities[currentEditing.id] = { name, timezone };
                showToast('成功', '城市已更新', 'success');
            } else {
                // 添加新城市
                appData.cities.push({ name, timezone });
                showToast('成功', '城市已添加', 'success');
            }
            
            // 重新渲染
            renderCities();
            closeModal(elements.cityModal);
        }

        // 删除城市
        function deleteCity(index) {
            const city = appData.cities[index];
            
            if (appData.cities.length <= 1) {
                showToast('错误', '至少保留一个城市', 'error');
                return;
            }
            
            if (confirm(`确定要删除城市"${city.name}"吗？`)) {
                appData.cities.splice(index, 1);
                
                // 重新渲染
                renderCities();
                showToast('成功', '城市已删除', 'success');
            }
        }

        // 渲染广告
        function renderAds() {
            // 广告位1
            if (appData.ads.ad1.image && appData.ads.ad1.url) {
                elements.ad1.innerHTML = `
                    <a href="${appData.ads.ad1.url}" target="_blank" class="block w-full h-full">
                        <img src="${appData.ads.ad1.image}" alt="广告图片" class="w-full h-full object-cover">
                    </a>
                `;
                elements.ad1Url.value = appData.ads.ad1.url;
            } else {
                elements.ad1.innerHTML = `
                    <div class="text-center p-4">
                        <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                        <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
                    </div>
                `;
                elements.ad1Url.value = '';
            }
            
            // 广告位2
            if (appData.ads.ad2.image && appData.ads.ad2.url) {
                elements.ad2.innerHTML = `
                    <a href="${appData.ads.ad2.url}" target="_blank" class="block w-full h-full">
                        <img src="${appData.ads.ad2.image}" alt="广告图片" class="w-full h-full object-cover">
                    </a>
                `;
                elements.ad2Url.value = appData.ads.ad2.url;
            } else {
                elements.ad2.innerHTML = `
                    <div class="text-center p-4">
                        <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                        <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
                    </div>
                `;
                elements.ad2Url.value = '';
            }
            
            // 广告位3
            if (appData.ads.ad3.image && appData.ads.ad3.url) {
                elements.ad3.innerHTML = `
                    <a href="${appData.ads.ad3.url}" target="_blank" class="block w-full h-full">
                        <img src="${appData.ads.ad3.image}" alt="广告图片" class="w-full h-full object-cover">
                    </a>
                `;
                elements.ad3Url.value = appData.ads.ad3.url;
            } else {
                elements.ad3.innerHTML = `
                    <div class="text-center p-4">
                        <p class="text-gray-500 dark:text-gray-400 text-sm">广告位</p>
                        <p class="text-gray-400 dark:text-gray-500 text-xs">编辑中心可配置</p>
                    </div>
                `;
                elements.ad3Url.value = '';
            }
        }

        // 处理广告图片上传
        function handleAdImageUpload(event, adKey) {
            const file = event.target.files[0];
            
            if (!file) return;
            
            // 检查文件大小（3MB）
            if (file.size > 3 * 1024 * 1024) {
                showToast('错误', '图片大小不能超过3MB', 'error');
                event.target.value = '';
                return;
            }
            
            // 检查文件类型
            if (!file.type.startsWith('image/')) {
                showToast('错误', '请上传图片文件', 'error');
                event.target.value = '';
                return;
            }
            
            // 读取图片并显示
            const reader = new FileReader();
            reader.onload = function(e) {
                appData.ads[adKey].image = e.target.result;
                renderAds();
                showToast('成功', '广告图片已更新', 'success');
            };
            reader.readAsDataURL(file);
        }

        // 更新广告链接
        function updateAdUrl(adKey, url) {
            appData.ads[adKey].url = url;
            showToast('提示', '广告链接已更新（保存后生效）', 'info');
        }

        // 移除广告
        function removeAd(adKey) {
            appData.ads[adKey] = { image: '', url: '' };
            renderAds();
            showToast('成功', '广告已移除', 'success');
        }

        // 启动在线时长计时器
        function startOnlineTimeTimer() {
            // 计算部署日期（如果没有，使用当前日期）
            if (!(appData.deploymentDate instanceof Date) || isNaN(appData.deploymentDate.getTime())) {
                appData.deploymentDate = new Date();
            }
            
            // 更新在线时长
            function updateOnlineTime() {
                const now = new Date();
                const diff = now - appData.deploymentDate;
                
                const seconds = Math.floor((diff / 1000) % 60);
                const minutes = Math.floor((diff / (1000 * 60)) % 60);
                const hours = Math.floor(diff / (1000 * 60 * 60));
                
                elements.onlineTime.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            // 立即更新一次
            updateOnlineTime();
            
            // 每秒更新一次
            onlineTimeTimer = setInterval(updateOnlineTime, 1000);
        }

        // 启动健康提醒
        function startHealthReminders() {
            // 随机选择一个提醒
            function setRandomReminder() {
                const randomIndex = Math.floor(Math.random() * appData.healthReminders.length);
                elements.healthReminder.textContent = appData.healthReminders[randomIndex];
            }
            
            // 立即设置一个提醒
            setRandomReminder();
            
            // 每30分钟更新一次提醒
            reminderTimer = setInterval(setRandomReminder, 30 * 60 * 1000);
            
            // 启动时钟定时器（每秒更新）
            clockTimer = setInterval(updateClocks, 1000);
        }

        // 更新书签计数
        function updateBookmarkCount() {
            let total = 0;
            Object.values(appData.bookmarks).forEach(folder => {
                total += folder.length;
            });
            
            elements.totalSites.textContent = total;
            elements.bookmarkCount.textContent = `(${total})`;
        }

        // 搜索书签
        function searchBookmarks(query) {
            renderBookmarks(query);
        }

        // 打开模态框
        function openModal(modal) {
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.classList.add('opacity-100', 'pointer-events-auto');
            modal.querySelector('div').classList.remove('scale-95');
            modal.querySelector('div').classList.add('scale-100');
            document.body.style.overflow = 'hidden';
        }

        // 关闭模态框
        function closeModal(modal) {
            modal.classList.remove('opacity-100', 'pointer-events-auto');
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            document.body.style.overflow = '';
        }

        // 显示提示消息
        function showToast(title, message, type = 'info') {
            const toast = elements.toast;
            const icon = elements.toastIcon;
            const text = elements.toastMessage;
            
            // 设置图标
            icon.className = '';
            if (type === 'success') {
                icon.className = 'fa fa-check-circle mr-2 text-green-400';
            } else if (type === 'error') {
                icon.className = 'fa fa-exclamation-circle mr-2 text-red-400';
            } else if (type === 'warning') {
                icon.className = 'fa fa-exclamation-triangle mr-2 text-yellow-400';
            } else {
                icon.className = 'fa fa-info-circle mr-2 text-blue-400';
            }
            
            // 设置消息
            text.textContent = `${title}: ${message}`;
            
            // 显示提示
            toast.classList.remove('opacity-0');
            toast.classList.add('opacity-100');
            
            // 3秒后隐藏
            setTimeout(() => {
                toast.classList.remove('opacity-100');
                toast.classList.add('opacity-0');
            }, 3000);
        }

        // 显示加载动画
        function showLoader() {
            elements.loader.classList.remove('opacity-0', 'pointer-events-none');
            elements.loader.classList.add('opacity-100', 'pointer-events-auto');
        }

        // 隐藏加载动画
        function hideLoader() {
            elements.loader.classList.remove('opacity-100', 'pointer-events-auto');
            elements.loader.classList.add('opacity-0', 'pointer-events-none');
        }

        // 初始化事件监听
        function initEventListeners() {
            // 主题切换
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // 显示控制按钮（滚动时）
            window.addEventListener('scroll', showControls);
            
            // 打开设置/编辑中心
            elements.settingsBtn.addEventListener('click', () => {
                openModal(elements.editModal);
            });
            
            // 关闭编辑中心
            elements.closeEditBtn.addEventListener('click', () => {
                closeModal(elements.editModal);
            });
            
            elements.cancelEditBtn.addEventListener('click', () => {
                closeModal(elements.editModal);
            });
            
            // 保存更改
            elements.saveChangesBtn.addEventListener('click', async () => {
                const success = await saveDataToGitHub();
                if (success) {
                    renderBookmarks();
                    renderAds();
                    updateBookmarkCount();
                    closeModal(elements.editModal);
                }
            });
            
            // 导入书签
            elements.importBookmarksBtn.addEventListener('click', () => {
                elements.bookmarkFileInput.click();
            });
            
            elements.bookmarkFileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    importBookmarks(e.target.files[0]);
                    e.target.value = ''; // 重置输入，允许重复选择同一文件
                }
            });
            
            // 导出书签
            elements.exportBookmarksBtn.addEventListener('click', exportBookmarks);
            
            // 添加书签
            elements.addBookmarkBtn.addEventListener('click', addBookmark);
            
            // 取消书签操作
            elements.cancelBookmarkBtn.addEventListener('click', () => {
                closeModal(elements.bookmarkModal);
            });
            
            // 保存书签
            elements.saveBookmarkBtn.addEventListener('click', saveBookmark);
            
            // 保存GitHub设置
            elements.saveGithubBtn.addEventListener('click', () => {
                appData.github.username = elements.githubUsername.value.trim();
                appData.github.repo = elements.githubRepo.value.trim();
                appData.github.token = elements.githubToken.value.trim();
                
                saveLocalStorageData();
                showValidationMessage('GitHub设置已保存', 'success');
            });
            
            // 验证GitHub令牌
            elements.validateGithubBtn.addEventListener('click', validateGitHubToken);
            
            // 添加城市
            elements.addCityBtn.addEventListener('click', addCity);
            
            // 取消城市操作
            elements.cancelCityBtn.addEventListener('click', () => {
                closeModal(elements.cityModal);
            });
            
            // 保存城市
            elements.saveCityBtn.addEventListener('click', saveCity);
            
            // 广告图片上传
            elements.ad1Image.addEventListener('change', (e) => {
                handleAdImageUpload(e, 'ad1');
            });
            
            elements.ad2Image.addEventListener('change', (e) => {
                handleAdImageUpload(e, 'ad2');
            });
            
            elements.ad3Image.addEventListener('change', (e) => {
                handleAdImageUpload(e, 'ad3');
            });
            
            // 广告链接更新
            elements.ad1Url.addEventListener('change', (e) => {
                updateAdUrl('ad1', e.target.value);
            });
            
            elements.ad2Url.addEventListener('change', (e) => {
                updateAdUrl('ad2', e.target.value);
            });
            
            elements.ad3Url.addEventListener('change', (e) => {
                updateAdUrl('ad3', e.target.value);
            });
            
            // 移除广告
            elements.removeAd1Btn.addEventListener('click', () => {
                removeAd('ad1');
            });
            
            elements.removeAd2Btn.addEventListener('click', () => {
                removeAd('ad2');
            });
            
            elements.removeAd3Btn.addEventListener('click', () => {
                removeAd('ad3');
            });
            
            // 搜索书签
            elements.searchInput.addEventListener('input', (e) => {
                searchBookmarks(e.target.value);
            });
        }

        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
